2026-02-20 16:49:06,182 - Orchestrator - INFO - =============================================
2026-02-20 16:49:06,182 - Orchestrator - INFO - === Starting Trading Bot Orchestrator [KC] ===
2026-02-20 16:49:06,182 - Orchestrator - INFO - =============================================
2026-02-20 16:49:06,182 - Orchestrator - INFO - Data directory: /home/rodrigo/real_options/data/KC
2026-02-20 16:49:06,189 - ConfigLoader - INFO - Config loaded successfully. Mode: LIVE. Providers: gemini, anthropic, openai, xai
2026-02-20 16:49:06,191 - trading_bot.state_manager - INFO - StateManager data_dir set to: /home/rodrigo/real_options/data/KC
2026-02-20 16:49:06,191 - trading_bot.task_tracker - INFO - TaskTracker data_dir set to: /home/rodrigo/real_options/data/KC
2026-02-20 16:49:06,191 - trading_bot.decision_signals - INFO - DecisionSignals data_dir set to: /home/rodrigo/real_options/data/KC
2026-02-20 16:49:06,191 - OrderManager - INFO - OrderManager capital state dir set to: /home/rodrigo/real_options/data/KC
2026-02-20 16:49:06,191 - trading_bot.sentinel_stats - INFO - SentinelStats data_dir set to: /home/rodrigo/real_options/data/KC
2026-02-20 16:49:06,191 - trading_bot.utils - INFO - Utils data_dir set to: /home/rodrigo/real_options/data/KC
2026-02-20 16:49:06,192 - trading_bot.tms - INFO - TMS default path set to: /home/rodrigo/real_options/data/KC/tms
2026-02-20 16:49:06,192 - trading_bot.brier_bridge - INFO - BrierBridge data_dir set to: /home/rodrigo/real_options/data/KC
2026-02-20 16:49:06,192 - trading_bot.brier_scoring - INFO - BrierScoring data_dir set to: /home/rodrigo/real_options/data/KC
2026-02-20 16:49:06,192 - trading_bot.weighted_voting - INFO - WeightedVoting data_dir set to: /home/rodrigo/real_options/data/KC
2026-02-20 16:49:06,192 - trading_bot.router_metrics - INFO - RouterMetrics data_dir set to: /home/rodrigo/real_options/data/KC
2026-02-20 16:49:06,193 - trading_bot.agents - INFO - Agents provenance log set to: /home/rodrigo/real_options/data/KC/research_provenance.log
2026-02-20 16:49:06,203 - Orchestrator - WARNING - ============================================================
2026-02-20 16:49:06,203 - Orchestrator - WARNING -   IB GATEWAY: REMOTE/PAPER (100.102.50.16)
2026-02-20 16:49:06,203 - Orchestrator - WARNING -   Client IDs: DEV range (10-79)
2026-02-20 16:49:06,203 - Orchestrator - WARNING -   Trading Mode: LIVE
2026-02-20 16:49:06,203 - Orchestrator - WARNING - ============================================================
2026-02-20 16:49:06,204 - Orchestrator - INFO - Budget Guard initialized. Daily limit: $15.0
2026-02-20 16:49:06,204 - trading_bot.drawdown_circuit_breaker - INFO - Loaded drawdown state: PANIC (-4.25%)
2026-02-20 16:49:06,205 - Orchestrator - INFO - Drawdown Guard initialized.
2026-02-20 16:49:06,205 - Orchestrator - INFO - Expiry filter window: 45-365 DTE
2026-02-20 16:49:06,430 - Orchestrator - INFO - --- Processing Deferred Triggers ---
2026-02-20 16:49:06,438 - Orchestrator - INFO - Processing 2 deferred triggers from overnight
2026-02-20 16:49:06,439 - trading_bot.connection_pool - INFO - Connecting IB (deferred) ID: 83 [REMOTE/PAPER]...
2026-02-20 16:49:06,632 - trading_bot.connection_pool - INFO - IB (deferred) connected successfully with ID 83
2026-02-20 16:49:06,646 - trading_bot.state_manager - INFO - Logged sentinel event from XSentimentSentinel to history.
2026-02-20 16:49:06,713 - Orchestrator - WARNING - Drawdown Circuit Breaker ACTIVE (PANIC) - Skipping Emergency Cycle
2026-02-20 16:49:06,713 - Orchestrator - INFO - Post-cycle debounce: 0s (gate-blocked (no debounce))
2026-02-20 16:49:06,713 - Orchestrator - INFO - Duplicate trigger detected: 8e01f951
2026-02-20 16:49:06,713 - Orchestrator - INFO - Skipping deferred trigger (deduplicated): MacroContagionSentinel
2026-02-20 16:49:06,713 - Orchestrator - INFO - Deferred triggers complete: 1 processed, 1 skipped, 0 rejected (contaminated)
2026-02-20 16:49:06,713 - trading_bot.connection_pool - INFO - Disconnecting IB (deferred)...
2026-02-20 16:49:09,717 - Orchestrator - INFO - Built session schedule: 17 tasks for KC (04:15-13:30 ET)
2026-02-20 16:49:09,717 - Orchestrator - INFO - Environment: DEV. Applying 0 minute 'Civil War' avoidance offset.
2026-02-20 16:49:09,722 - Orchestrator - WARNING - ‚ö†Ô∏è LATE START DETECTED: 8 scheduled tasks already passed:\n  - 03:30 ET: start_monitoring\n  - 03:31 ET: process_deferred_triggers\n  - 04:00 ET: cleanup_orphaned_theses\n  - 04:42 ET: signal_open\n  - 07:01 ET: signal_early\n  - 08:52 ET: audit_mid_session\n  - 09:20 ET: signal_mid\n  - 11:39 ET: signal_late
2026-02-20 16:49:09,725 - Orchestrator - INFO - --- Recovery: Evaluating 8 missed tasks ---
2026-02-20 16:49:09,725 - Orchestrator - INFO - üîÑ RECOVERY: Running missed start_monitoring [start_monitoring] (was scheduled 03:30 ET)
2026-02-20 16:49:09,725 - Orchestrator - INFO - System shutdown flag CLEARED ‚Äî new trading day beginning
2026-02-20 16:49:09,726 - Orchestrator - INFO - --- Starting position monitoring process ---
2026-02-20 16:49:09,729 - Orchestrator - INFO - Successfully started position monitor with PID: 2218893
2026-02-20 16:49:09,729 - Orchestrator - INFO - Started position monitoring service.
2026-02-20 16:49:09,734 - Orchestrator - INFO - ‚úÖ RECOVERY: start_monitoring completed
2026-02-20 16:49:09,734 - Orchestrator - INFO - üîÑ RECOVERY: Running missed process_deferred_triggers [process_deferred_triggers] (was scheduled 03:31 ET)
2026-02-20 16:49:09,735 - Orchestrator - INFO - --- Processing Deferred Triggers ---
2026-02-20 16:49:09,736 - Orchestrator - INFO - No deferred triggers to process.
2026-02-20 16:49:09,741 - Orchestrator - INFO - ‚úÖ RECOVERY: process_deferred_triggers completed
2026-02-20 16:49:09,741 - Orchestrator - INFO - üîÑ RECOVERY: Running missed cleanup_orphaned_theses [cleanup_orphaned_theses] (was scheduled 04:00 ET)
2026-02-20 16:49:09,741 - Orchestrator - INFO - --- AUTOMATED THESIS CLEANUP ---
2026-02-20 16:49:09,741 - trading_bot.connection_pool - INFO - Connecting IB (cleanup) ID: 72 [REMOTE/PAPER]...
2026-02-20 16:49:10,169 - trading_bot.connection_pool - INFO - IB (cleanup) connected successfully with ID 72
2026-02-20 16:49:10,200 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2026-02-20 16:49:10,398 - trading_bot.tms - INFO - TMS initialized at /home/rodrigo/real_options/data/KC/tms
2026-02-20 16:49:10,709 - Orchestrator - INFO - Thesis cleanup: no orphans found
2026-02-20 16:49:10,709 - trading_bot.connection_pool - INFO - Disconnecting IB (cleanup)...
2026-02-20 16:49:13,723 - Orchestrator - INFO - ‚úÖ RECOVERY: cleanup_orphaned_theses completed
2026-02-20 16:49:13,725 - Orchestrator - INFO - ‚úÖ ALREADY RAN: signal_open completed earlier today (before restart). Skipping re-execution.
2026-02-20 16:49:13,726 - Orchestrator - INFO - ‚úÖ ALREADY RAN: signal_early completed earlier today (before restart). Skipping re-execution.
2026-02-20 16:49:13,727 - Orchestrator - INFO - üîÑ RECOVERY: Running missed audit_mid_session [run_position_audit_cycle] (was scheduled 08:52 ET)
2026-02-20 16:49:13,727 - Orchestrator - INFO - --- POSITION AUDIT CYCLE (Scheduled) ---
2026-02-20 16:49:13,729 - trading_bot.connection_pool - INFO - Connecting IB (audit) ID: 59 [REMOTE/PAPER]...
2026-02-20 16:49:14,108 - trading_bot.connection_pool - INFO - IB (audit) connected successfully with ID 59
2026-02-20 16:49:14,115 - trading_bot.utils - INFO - üõ†Ô∏è FORCE_DELAYED_DATA enabled: Using Delayed Market Data (Type 3)
2026-02-20 16:49:14,169 - trading_bot.tms - INFO - TMS initialized at /home/rodrigo/real_options/data/KC/tms
2026-02-20 16:49:14,197 - Orchestrator - WARNING - State sync discrepancy: IBKR has 1 positions but ledger shows 0 open
2026-02-20 16:49:14,197 - Orchestrator - WARNING - State sync discrepancy: IBKR has 1 positions but TMS has 0 active theses
2026-02-20 16:49:14,504 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-20 16:49:14,511 - Orchestrator - WARNING - Proceeding with audit despite 2 discrepancies. IBKR positions are source of truth.
2026-02-20 16:49:14,545 - trading_bot.tms - INFO - TMS initialized at /home/rodrigo/real_options/data/KC/tms
2026-02-20 16:49:14,807 - trading_bot.heterogeneous_router - INFO - ResponseCache initialized with env=DEV, multiplier=0.25
2026-02-20 16:49:14,807 - trading_bot.heterogeneous_router - INFO - HeterogeneousRouter initialized. Available: ['openai', 'anthropic', 'gemini', 'xai']
2026-02-20 16:49:14,808 - trading_bot.agents - INFO - Heterogeneous routing enabled. Diversity: {'available_providers': ['openai', 'anthropic', 'gemini', 'xai'], 'diversity_score': 1.0}
2026-02-20 16:49:14,816 - trading_bot.tms - INFO - TMS initialized at /home/rodrigo/real_options/data/KC/tms
2026-02-20 16:49:14,834 - trading_bot.enhanced_brier - INFO - Loaded 1000 predictions from /home/rodrigo/real_options/data/KC/enhanced_brier.json
2026-02-20 16:49:15,246 - trading_bot.enhanced_brier - INFO - Enhanced Brier backfill complete: 0 resolved from CSV, 115 created from CSV, 0 resolved from council_history
2026-02-20 16:49:15,269 - trading_bot.brier_scoring - INFO - Loaded time-weighted Brier scores for 9 agents: {agronomist: 0.49, geopolitical: 0.23, inventory: 0.39, macro: 0.11, master_decision: 0.48, sentiment: 0.51, supply_chain: 0.50, technical: 0.49, volatility: 0.47}
2026-02-20 16:49:15,270 - trading_bot.agents - INFO - Loaded commodity profile: Coffee (Arabica)
2026-02-20 16:49:15,270 - trading_bot.observability - INFO - HallucinationDetector initialized for Coffee (Arabica): 9 port tokens, 23 producer tokens
2026-02-20 16:49:15,271 - trading_bot.observability - INFO - ObservabilityHub initialized for Coffee (Arabica)
2026-02-20 16:49:15,271 - trading_bot.agents - INFO - Observability Hub initialized.
2026-02-20 16:49:15,271 - trading_bot.agents - INFO - Trading Council initialized for Coffee (Arabica). Agents: gemini-3.1-pro-preview, Master: gemini-3.1-pro-preview, Grounded: gemini-3-flash-preview
2026-02-20 16:49:15,283 - Orchestrator - WARNING - Position audit: 1 legs could not be mapped to a thesis: ['KCK6']
2026-02-20 16:49:15,284 - Orchestrator - INFO - Grouped 1 IB positions into 0 thesis groups
2026-02-20 16:49:15,284 - Orchestrator - INFO - Refreshing active futures cache
2026-02-20 16:49:15,284 - root - INFO - Fetching 5 active futures contracts for KC on NYBOT...
2026-02-20 16:49:15,286 - ConfigLoader - INFO - Config loaded successfully. Mode: LIVE. Providers: gemini, anthropic, openai, xai
2026-02-20 16:49:15,287 - Orchestrator - INFO - 2026-02-20 16:49:14,570 - ConfigLoader - INFO - Config loaded successfully. Mode: LIVE. Providers: gemini, anthropic, openai, xai
2026-02-20 16:49:15,287 - Orchestrator - INFO - 2026-02-20 16:49:14,571 - __main__ - INFO - Position monitor connection attempt 1/5...
2026-02-20 16:49:15,287 - Orchestrator - INFO - 2026-02-20 16:49:14,572 - trading_bot.connection_pool - INFO - Connecting IB (monitor) ID: 29 [REMOTE/PAPER]...
2026-02-20 16:49:15,287 - Orchestrator - INFO - 2026-02-20 16:49:15,092 - trading_bot.connection_pool - INFO - IB (monitor) connected successfully with ID 29
2026-02-20 16:49:15,287 - Orchestrator - INFO - 2026-02-20 16:49:15,102 - trading_bot.utils - INFO - üõ†Ô∏è FORCE_DELAYED_DATA enabled: Using Delayed Market Data (Type 3)
2026-02-20 16:49:15,287 - Orchestrator - INFO - 2026-02-20 16:49:15,103 - __main__ - INFO - Position monitor connected and watching open positions.
2026-02-20 16:49:15,287 - Orchestrator - INFO - 2026-02-20 16:49:15,103 - root - INFO - Starting intraday P&L monitor. Stop: 50% (Max Risk), Profit: 80% (Capture), Interval: 600s
2026-02-20 16:49:15,287 - Orchestrator - INFO - 2026-02-20 16:49:15,103 - root - INFO - Order status and execution event handlers registered.
2026-02-20 16:49:15,287 - Orchestrator - INFO - 2026-02-20 16:49:15,220 - root - INFO - --- Risk Monitor: Checking 0 combo position(s) ---
2026-02-20 16:49:15,366 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-20 16:49:15,366 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 5.
2026-02-20 16:49:15,368 - Orchestrator - INFO - Position audit complete. All theses remain valid.
2026-02-20 16:49:15,853 - Orchestrator - INFO - Post-audit VaR: 95%=12.01% ($4,632), positions=1
2026-02-20 16:49:15,853 - trading_bot.heterogeneous_router - INFO - ResponseCache initialized with env=DEV, multiplier=0.25
2026-02-20 16:49:15,854 - trading_bot.heterogeneous_router - INFO - HeterogeneousRouter initialized. Available: ['openai', 'anthropic', 'gemini', 'xai']
2026-02-20 16:49:15,857 - trading_bot.rate_limiter - INFO - GlobalRateLimiter initialized: ['gemini', 'openai', 'anthropic', 'xai']
2026-02-20 16:49:23,725 - trading_bot.var_calculator - WARNING - L1 Interpreter LLM call failed: Expecting value: line 1 column 1 (char 0)
2026-02-20 16:49:23,726 - trading_bot.heterogeneous_router - INFO - ResponseCache initialized with env=DEV, multiplier=0.25
2026-02-20 16:49:23,726 - trading_bot.heterogeneous_router - INFO - HeterogeneousRouter initialized. Available: ['openai', 'anthropic', 'gemini', 'xai']
2026-02-20 16:49:30,631 - trading_bot.connection_pool - INFO - Disconnecting IB (audit)...
2026-02-20 16:49:33,641 - Orchestrator - INFO - ‚úÖ RECOVERY: audit_mid_session completed
2026-02-20 16:49:33,641 - Orchestrator - INFO - ‚úÖ ALREADY RAN: signal_mid completed earlier today (before restart). Skipping re-execution.
2026-02-20 16:49:33,641 - Orchestrator - INFO - ‚úÖ ALREADY RAN: signal_late completed earlier today (before restart). Skipping re-execution.
2026-02-20 16:49:33,641 - Orchestrator - INFO - System restarted with 8 missed tasks.\n‚úÖ 4 recovered | ‚è≠Ô∏è 0 skipped | ‚úîÔ∏è 4 already ran
2026-02-20 16:49:33,876 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-20 16:49:33,879 - Orchestrator - INFO - Running TopicDiscoveryAgent on startup...
2026-02-20 16:49:33,912 - trading_bot.topic_discovery - INFO - Starting Topic Discovery Scan...
2026-02-20 16:49:45,638 - trading_bot.tms - INFO - TMS initialized at /home/rodrigo/real_options/data/KC/tms
2026-02-20 16:49:45,641 - Orchestrator - INFO - Startup TopicDiscovery: 3 topics, No changes
2026-02-20 16:49:45,642 - Orchestrator - INFO - Next task 'audit_pre_close' (Audit: Pre-Close) scheduled for 2026-02-20 17:55:00 UTC. Waiting for 1.09 hours.
2026-02-20 16:49:45,643 - Orchestrator - INFO - --- Starting Sentinel Array ---
2026-02-20 16:49:46,270 - Orchestrator - INFO - Market Open: Establishing Sentinel IB connection...
2026-02-20 16:49:46,273 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 19 [REMOTE/PAPER]...
2026-02-20 16:49:46,274 - trading_bot.self_healing - INFO - Self-Healing Monitor started
2026-02-20 16:50:01,276 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-02-20 16:50:01,784 - trading_bot.connection_pool - ERROR - IB (sentinel) connection failed: . Next retry backoff: 10.0s
2026-02-20 16:50:01,785 - Orchestrator - WARNING - Sentinel IB connection deferred: 
2026-02-20 16:50:40,724 - Orchestrator - INFO - XSentimentSentinel: trigger detected (severity=6)
2026-02-20 16:50:40,728 - trading_bot.state_manager - INFO - Queued deferred trigger from XSentimentSentinel
2026-02-20 16:50:40,728 - Orchestrator - INFO - Deferred XSentimentSentinel trigger for market open
2026-02-20 16:50:56,094 - Orchestrator - INFO - MacroContagionSentinel: trigger detected (source=MacroContagionSentinel, severity=9)
2026-02-20 16:50:56,103 - trading_bot.state_manager - INFO - Queued deferred trigger from MacroContagionSentinel
2026-02-20 16:50:56,104 - Orchestrator - INFO - Deferred MacroContagionSentinel trigger for market open
2026-02-20 16:51:56,161 - Orchestrator - INFO - Market Open: Establishing Sentinel IB connection...
2026-02-20 16:51:56,161 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 19 [REMOTE/PAPER]...
2026-02-20 16:51:56,440 - trading_bot.connection_pool - INFO - IB (sentinel) connected successfully with ID 19
2026-02-20 16:51:56,448 - trading_bot.utils - INFO - üõ†Ô∏è FORCE_DELAYED_DATA enabled: Using Delayed Market Data (Type 3)
2026-02-20 16:51:56,449 - Orchestrator - INFO - Sentinel IB connected and injected into PriceSentinel.
2026-02-20 16:51:56,450 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-02-20 16:51:56,454 - ConfigLoader - INFO - Config loaded successfully. Mode: LIVE. Providers: gemini, anthropic, openai, xai
2026-02-20 16:51:56,525 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-20 16:51:56,526 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 1.
2026-02-20 16:51:56,526 - Orchestrator - INFO - Refreshed contract cache: KCK6
2026-02-20 16:51:56,526 - Orchestrator - INFO - Market Open: Engaging Microstructure Sentinel
2026-02-20 16:51:56,526 - trading_bot.connection_pool - INFO - Connecting IB (microstructure) ID: 49 [REMOTE/PAPER]...
2026-02-20 16:52:11,602 - ib_insync.ib - ERROR - open orders request timed out
2026-02-20 16:52:11,603 - ib_insync.ib - ERROR - completed orders request timed out
2026-02-20 16:52:11,603 - ib_insync.ib - ERROR - account updates request timed out
2026-02-20 16:52:11,603 - ib_insync.ib - ERROR - account updates for DUM450165 request timed out
2026-02-20 16:52:11,742 - trading_bot.connection_pool - INFO - IB (microstructure) connected successfully with ID 49
2026-02-20 16:52:11,748 - trading_bot.utils - INFO - üõ†Ô∏è FORCE_DELAYED_DATA enabled: Using Delayed Market Data (Type 3)
2026-02-20 16:55:14,569 - Orchestrator - INFO - Sentinel loop heartbeat: iteration=5, market_open=True, trading_day=True
2026-02-20 16:59:15,321 - Orchestrator - INFO - 2026-02-20 16:59:15,320 - root - INFO - --- Risk Monitor: Checking 0 combo position(s) ---
