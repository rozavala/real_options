
  You can now view your Streamlit app in your browser.

  URL: http://0.0.0.0:8501

2026-01-29 13:44:10,035 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-29 14:22:08,636 - trading_bot.connection_pool - INFO - Connecting IB (test_utilities) ID: 206...
2026-01-29 14:22:23,652 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-29 14:22:23,664 - trading_bot.connection_pool - ERROR - IB (test_utilities) connection failed: . Next retry backoff: 10.0s
2026-01-29 14:28:36,183 - trading_bot.connection_pool - INFO - Connecting IB (test_utilities) ID: 205...
2026-01-29 14:28:36,848 - trading_bot.connection_pool - INFO - IB (test_utilities) connected successfully with ID 205
2026-01-29 14:28:47,147 - trading_bot.connection_pool - WARNING - IB (test_utilities) connection health check failed: unable to perform operation on <TCPTransport closed=True reading=False 0x7c99e40016f0>; the handler is closed
2026-01-29 14:28:47,147 - trading_bot.connection_pool - INFO - Disconnecting stale IB (test_utilities) before reconnect...
2026-01-29 14:28:50,151 - trading_bot.connection_pool - INFO - Connecting IB (test_utilities) ID: 201...
2026-01-29 14:28:50,476 - trading_bot.connection_pool - INFO - IB (test_utilities) connected successfully with ID 201
2026-01-29 14:29:16,907 - OrderManager - INFO - >>> Starting combined task: Generate and Execute Orders <<<
2026-01-29 14:29:16,908 - OrderManager - INFO - --- Starting order generation and queuing process ---
2026-01-29 14:29:16,908 - OrderManager - INFO - Step 1: Running data pull...
Setup complete.
Dynamically determining the next 5 coffee tickers...
... chronological tickers found: ['KCH26.NYB', 'KCK26.NYB', 'KCN26.NYB', 'KCU26.NYB', 'KCZ26.NYB']

Fetching Coffee Prices...

Fetching weather data...

Fetching economic data from FRED...

Fetching other market data from yfinance...

Processing OHLV and fetching COT data...
Fetching historical COT data directly from CFTC...
... Successfully processed and filtered year 1986 (Rows: 24)
... Successfully processed and filtered year 1987 (Rows: 24)
... Successfully processed and filtered year 1988 (Rows: 24)
... Successfully processed and filtered year 1989 (Rows: 24)
... Successfully processed and filtered year 1990 (Rows: 23)
... Successfully processed and filtered year 1991 (Rows: 24)
... Successfully processed and filtered year 1992 (Rows: 31)
... Successfully processed and filtered year 1993 (Rows: 52)
... Successfully processed and filtered year 1994 (Rows: 52)
... Successfully processed and filtered year 1995 (Rows: 52)
... Successfully processed and filtered year 1996 (Rows: 53)
... Successfully processed and filtered year 1997 (Rows: 52)
... Successfully processed and filtered year 1998 (Rows: 52)
... Successfully processed and filtered year 1999 (Rows: 52)
... Successfully processed and filtered year 2000 (Rows: 52)
... Successfully processed and filtered year 2001 (Rows: 52)
... Successfully processed and filtered year 2002 (Rows: 52)
... Successfully processed and filtered year 2003 (Rows: 52)
... Successfully processed and filtered year 2004 (Rows: 52)
... Successfully processed and filtered year 2005 (Rows: 52)
... Successfully processed and filtered year 2006 (Rows: 52)
... Successfully processed and filtered year 2007 (Rows: 53)
... Successfully processed and filtered year 2008 (Rows: 52)
... Successfully processed and filtered year 2009 (Rows: 52)
... Successfully processed and filtered year 2010 (Rows: 52)
... Successfully processed and filtered year 2011 (Rows: 52)
... Successfully processed and filtered year 2012 (Rows: 53)
... Successfully processed and filtered year 2013 (Rows: 52)
... Successfully processed and filtered year 2014 (Rows: 52)
... Successfully processed and filtered year 2015 (Rows: 52)
... Successfully processed and filtered year 2016 (Rows: 52)
... Successfully processed and filtered year 2017 (Rows: 52)
... Successfully processed and filtered year 2018 (Rows: 53)
... Successfully processed and filtered year 2019 (Rows: 52)
... Successfully processed and filtered year 2020 (Rows: 52)
... Successfully processed and filtered year 2021 (Rows: 52)
... Successfully processed and filtered year 2022 (Rows: 52)
... Successfully processed and filtered year 2023 (Rows: 52)
... Successfully processed and filtered year 2024 (Rows: 53)
... Successfully processed and filtered year 2025 (Rows: 52)
... Successfully processed and filtered year 2026 (Rows: 3)
Concatenating COT data...

All data fetching complete.

Successfully processed data. Shape: (525, 51)

==============================
<b>Data Pull Validation Report</b>
Timestamp: 2026-01-29 14:29:47

<b>Overall Status: âœ… SUCCESS</b>
(9 checks passed, 0 checks failed)

âœ… <b>Coffee Price Fetch:</b> Successfully fetched 5 active contracts.
âœ… <b>Weather Data Fetch:</b> Successfully fetched data for 4 locations.
âœ… <b>FRED Data Fetch:</b> Completed all FRED series requests.
âœ… <b>Other Market Data Fetch:</b> Completed all other yfinance requests.
âœ… <b>Coffee OHLV Processing:</b> Successfully processed OHLV data.
âœ… <b>COT Report Fetch:</b> Successfully fetched CFTC data. Last entry: 2026-01-20
âœ… <b>Pre-Fill Missing Data:</b> Total missing data before fill is 9.03%.
âœ… <b>Data Recency:</b> Most recent data point is from 2026-01-29.
âœ… <b>Price Spike Detection:</b> Max daily change was 8.51%. Threshold is 15%.

<b>Final Output File Stats:</b>
- Rows: 525
- Columns: 51
==============================
2026-01-29 14:29:48,135 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-01-29 14:29:48,145 - OrderManager - INFO - Data pull complete.
2026-01-29 14:29:48,146 - OrderManager - INFO - Step 2: Running local model inference...
2026-01-29 14:29:48,146 - root - INFO - Loading all production assets...
2026-01-29 14:29:49,279 - root - INFO - All 10 assets loaded successfully.
2026-01-29 14:29:49,282 - root - INFO - Macro Trend: BULL (Front Month: 349.05, SMA200: 346.76)
2026-01-29 14:29:49,282 - root - INFO - Generating features from new data...
2026-01-29 14:29:55,043 - root - INFO - Feature generation complete.
2026-01-29 14:29:55,043 - root - INFO - Running hybrid prediction...
WARNING: All log messages before absl::InitializeLog() is called are written to STDERR
I0000 00:00:1769696997.437910  461654 device_compiler.h:196] Compiled cluster using XLA!  This line is logged at most once for the lifetime of the process.
[1m1/1[0m [32mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m[37m[0m [1m0s[0m 2s/step[1m1/1[0m [32mâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”[0m[37m[0m [1m2s[0m 2s/step
2026-01-29 14:29:57,550 - root - INFO - {
  "signals": [
    {
      "action": "LONG",
      "predicted_return": 0.006044199643458585,
      "ml_confidence": 0.5717458010928467,
      "confidence": 0.5717458010928467,
      "expected_price": 351.1597156047362,
      "regime": "BULL",
      "reason": "AI Buy + Bull Trend",
      "price": 349.04998779296875,
      "sma_200": 346.7595002746582
    },
    {
      "action": "LONG",
      "predicted_return": 0.005614058799080181,
      "ml_confidence": 0.5667388599672525,
      "confidence": 0.5667388599672525,
      "expected_price": 334.26610700703316,
      "regime": "BULL",
      "reason": "AI Buy + Bull Trend",
      "price": 332.3999938964844,
      "sma_200": 346.7595002746582
    },
    {
      "action": "LONG",
      "predicted_return": 0.0051488936745789785,
      "ml_confidence": 0.5612999589345771,
      "confidence": 0.5612999589345771,
      "expected_price": 326.7236356190379,
      "regime": "BULL",
      "reason": "AI Buy + Bull Trend",
      "price": 325.04998779296875,
      "sma_200": 346.7595002746582
    },
    {
      "action": "NEUTRAL",
      "predicted_return": 0.004672359622821708,
      "ml_confidence": 0.5557039713535679,
      "confidence": 0.5557039713535679,
      "expected_price": 320.1388412617787,
      "regime": "BULL",
      "reason": "Forecast 0.47% vs Threshold 0.50%",
      "price": 318.6499938964844,
      "sma_200": 346.7595002746582
    },
    {
      "action": "NEUTRAL",
      "predicted_return": 0.0043391520243925156,
      "ml_confidence": 0.5517776893234072,
      "confidence": 0.5517776893234072,
      "expected_price": 313.8559850076227,
      "regime": "BULL",
      "reason": "Forecast 0.43% vs Threshold 0.50%",
      "price": 312.5,
      "sma_200": 346.7595002746582
    }
  ]
}
2026-01-29 14:29:57,554 - OrderManager - INFO - Successfully received predictions from local model: [{'action': 'LONG', 'predicted_return': 0.006044199643458585, 'ml_confidence': 0.5717458010928467, 'confidence': 0.5717458010928467, 'expected_price': 351.1597156047362, 'regime': 'BULL', 'reason': 'AI Buy + Bull Trend', 'price': 349.04998779296875, 'sma_200': 346.7595002746582}, {'action': 'LONG', 'predicted_return': 0.005614058799080181, 'ml_confidence': 0.5667388599672525, 'confidence': 0.5667388599672525, 'expected_price': 334.26610700703316, 'regime': 'BULL', 'reason': 'AI Buy + Bull Trend', 'price': 332.3999938964844, 'sma_200': 346.7595002746582}, {'action': 'LONG', 'predicted_return': 0.0051488936745789785, 'ml_confidence': 0.5612999589345771, 'confidence': 0.5612999589345771, 'expected_price': 326.7236356190379, 'regime': 'BULL', 'reason': 'AI Buy + Bull Trend', 'price': 325.04998779296875, 'sma_200': 346.7595002746582}, {'action': 'NEUTRAL', 'predicted_return': 0.004672359622821708, 'ml_confidence': 0.5557039713535679, 'confidence': 0.5557039713535679, 'expected_price': 320.1388412617787, 'regime': 'BULL', 'reason': 'Forecast 0.47% vs Threshold 0.50%', 'price': 318.6499938964844, 'sma_200': 346.7595002746582}, {'action': 'NEUTRAL', 'predicted_return': 0.0043391520243925156, 'ml_confidence': 0.5517776893234072, 'confidence': 0.5517776893234072, 'expected_price': 313.8559850076227, 'regime': 'BULL', 'reason': 'Forecast 0.43% vs Threshold 0.50%', 'price': 312.5, 'sma_200': 346.7595002746582}]
2026-01-29 14:29:57,558 - trading_bot.connection_pool - INFO - Connecting IB (order_manager) ID: 144...
2026-01-29 14:29:57,710 - trading_bot.connection_pool - INFO - IB (order_manager) connected successfully with ID 144
2026-01-29 14:29:57,720 - trading_bot.utils - INFO - ðŸ› ï¸ Configuring Market Data: Requesting LIVE (Type 1) Data.
2026-01-29 14:29:57,720 - OrderManager - INFO - Connected to IB for signal generation.
2026-01-29 14:29:57,720 - OrderManager - INFO - Step 2.5: Generating structured signals from predictions...
2026-01-29 14:29:57,720 - trading_bot.signal_generator - INFO - --- Starting Multi-Agent Signal Generation (Council) ---
2026-01-29 14:29:57,888 - trading_bot.heterogeneous_router - INFO - ResponseCache initialized with env=DEV, multiplier=0.25
2026-01-29 14:29:57,888 - trading_bot.heterogeneous_router - INFO - HeterogeneousRouter initialized. Available: ['openai', 'xai', 'anthropic', 'gemini']
2026-01-29 14:29:57,888 - trading_bot.agents - INFO - Heterogeneous routing enabled. Diversity: {'available_providers': ['openai', 'xai', 'anthropic', 'gemini'], 'diversity_score': 1.0}
2026-01-29 14:29:57,913 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2026-01-29 14:29:58,126 - trading_bot.tms - INFO - TMS initialized at ./data/tms
2026-01-29 14:29:58,126 - trading_bot.agents - INFO - Coffee Council initialized. Agents: gemini-3-pro-preview, Master: gemini-3-pro-preview
2026-01-29 14:29:58,126 - trading_bot.heterogeneous_router - INFO - ResponseCache initialized with env=DEV, multiplier=0.25
2026-01-29 14:29:58,126 - trading_bot.heterogeneous_router - INFO - HeterogeneousRouter initialized. Available: ['openai', 'xai', 'anthropic', 'gemini']
2026-01-29 14:29:58,127 - root - INFO - Fetching 5 active futures contracts for KC on NYBOT...
2026-01-29 14:29:58,444 - root - INFO - Found 11 active tradeable contracts (>=45d exp). Returning the first 5.
2026-01-29 14:29:58,446 - trading_bot.signal_generator - INFO - Convening Council for KCH6 (202603)...
2026-01-29 14:29:58,447 - trading_bot.signal_generator - INFO - Convening Council for KCK6 (202605)...
2026-01-29 14:29:58,447 - trading_bot.signal_generator - INFO - Convening Council for KCN6 (202607)...
2026-01-29 14:29:59,837 - trading_bot.agents - INFO - Retrieved 3 TMS insights for agronomist.
2026-01-29 14:29:59,838 - trading_bot.agents - INFO - [agronomist] Phase 1: Gathering grounded data...
2026-01-29 14:29:59,839 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2026-01-29 14:30:00,671 - trading_bot.agents - INFO - Retrieved 3 TMS insights for macro.
2026-01-29 14:30:00,671 - trading_bot.agents - INFO - [macro] Phase 1: Gathering grounded data...
2026-01-29 14:30:00,673 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2026-01-29 14:30:01,518 - trading_bot.agents - INFO - Retrieved 3 TMS insights for geopolitical.
2026-01-29 14:30:01,519 - trading_bot.agents - INFO - [geopolitical] Phase 1: Gathering grounded data...
2026-01-29 14:30:01,519 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2026-01-29 14:30:02,351 - trading_bot.agents - INFO - Retrieved 3 TMS insights for supply_chain.
2026-01-29 14:30:02,352 - trading_bot.agents - INFO - [supply_chain] Phase 1: Gathering grounded data...
2026-01-29 14:30:02,352 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2026-01-29 14:30:03,119 - trading_bot.agents - INFO - Retrieved 3 TMS insights for inventory.
2026-01-29 14:30:03,119 - trading_bot.agents - INFO - [inventory] Phase 1: Gathering grounded data...
2026-01-29 14:30:03,119 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
