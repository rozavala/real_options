2026-01-30 17:56:28,231 - Orchestrator - INFO - =============================================
2026-01-30 17:56:28,233 - Orchestrator - INFO - === Starting the Trading Bot Orchestrator ===
2026-01-30 17:56:28,233 - Orchestrator - INFO - =============================================
2026-01-30 17:56:28,461 - Orchestrator - INFO - --- Processing Deferred Triggers ---
2026-01-30 17:56:28,461 - Orchestrator - INFO - No deferred triggers to process.
2026-01-30 17:56:28,461 - Orchestrator - INFO - Environment: DEV. Applying -10 minute 'Civil War' avoidance offset.
2026-01-30 17:56:28,461 - Orchestrator - INFO - Next task 'close_stale_positions' scheduled for 2026-01-30 18:20:00 UTC. Waiting for 0.39 hours.
2026-01-30 17:56:28,461 - Orchestrator - INFO - --- Starting Sentinel Array ---
2026-01-30 17:56:28,462 - trading_bot.sentinels - INFO - WeatherSentinel: Loaded 3 active alerts from disk
2026-01-30 17:56:28,694 - trading_bot.sentinels - INFO - XSentimentSentinel initialized with model: grok-4-1-fast-reasoning
2026-01-30 17:56:28,696 - Orchestrator - INFO - Market Open: Establishing Sentinel IB connection...
2026-01-30 17:56:28,697 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 110...
2026-01-30 17:56:28,859 - trading_bot.connection_pool - INFO - IB (sentinel) connected successfully with ID 110
2026-01-30 17:56:28,872 - trading_bot.utils - INFO - üõ†Ô∏è Configuring Market Data: Requesting LIVE (Type 1) Data.
2026-01-30 17:56:28,872 - Orchestrator - INFO - Sentinel IB connected and injected into PriceSentinel.
2026-01-30 17:56:28,872 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-01-30 17:56:29,076 - root - INFO - Found 11 active tradeable contracts (>=45d exp). Returning the first 1.
2026-01-30 17:56:29,076 - Orchestrator - INFO - Refreshed contract cache: KCH6
2026-01-30 17:56:29,076 - Orchestrator - INFO - Market Open: Engaging Microstructure Sentinel
2026-01-30 17:56:29,077 - trading_bot.connection_pool - INFO - Connecting IB (microstructure) ID: 205...
2026-01-30 17:56:29,246 - trading_bot.connection_pool - INFO - IB (microstructure) connected successfully with ID 205
2026-01-30 17:56:29,254 - trading_bot.utils - INFO - üõ†Ô∏è Configuring Market Data: Requesting LIVE (Type 1) Data.
2026-01-30 17:56:29,254 - trading_bot.microstructure_sentinel - INFO - MicrostructureSentinel initialized
2026-01-30 17:56:31,256 - trading_bot.microstructure_sentinel - INFO - Subscribed to microstructure for KCH6
2026-01-30 17:56:35,074 - trading_bot.sentinels - WARNING - WEATHER SENTINEL DETECTED: Drought Risk in Honduras Copan: 10 days with < 5.0mm rain
2026-01-30 17:56:35,089 - trading_bot.state_manager - INFO - Logged sentinel event from WeatherSentinel to history.
2026-01-30 17:56:35,089 - Orchestrator - INFO - üö® EMERGENCY CYCLE TRIGGERED by WeatherSentinel: Drought Risk in Honduras Copan: 10 days with < 5.0mm rain
2026-01-30 17:56:35,416 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-01-30 17:56:35,444 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2026-01-30 17:56:35,611 - trading_bot.tms - INFO - TMS initialized at ./data/tms
2026-01-30 17:56:35,893 - trading_bot.heterogeneous_router - INFO - ResponseCache initialized with env=DEV, multiplier=0.25
2026-01-30 17:56:35,894 - trading_bot.heterogeneous_router - INFO - HeterogeneousRouter initialized. Available: ['anthropic', 'openai', 'xai', 'gemini']
2026-01-30 17:56:35,894 - trading_bot.agents - INFO - Heterogeneous routing enabled. Diversity: {'available_providers': ['anthropic', 'openai', 'xai', 'gemini'], 'diversity_score': 1.0}
2026-01-30 17:56:35,899 - trading_bot.tms - INFO - TMS initialized at ./data/tms
2026-01-30 17:56:35,900 - trading_bot.agents - INFO - Coffee Council initialized. Agents: gemini-3-pro-preview, Master: gemini-3-pro-preview
2026-01-30 17:56:35,900 - root - INFO - Fetching 2 active futures contracts for KC on NYBOT...
2026-01-30 17:56:35,962 - root - INFO - Found 11 active tradeable contracts (>=45d exp). Returning the first 2.
2026-01-30 17:56:35,963 - Orchestrator - INFO - Targeting contract: KCH6 (202603)
2026-01-30 17:56:36,077 - Orchestrator - WARNING - PRICED IN CHECK FAILED: Price already -3.5% - signal likely priced in. Skipping emergency cycle.
2026-01-30 17:56:36,382 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-01-30 17:56:36,385 - Orchestrator - INFO - Post-cycle debounce set for 1800s
2026-01-30 17:56:40,529 - google_genai.models - INFO - AFC is enabled with max remote calls: 10.
2026-01-30 17:56:44,768 - Orchestrator - ERROR - Error in Sentinel Loop: 'list' object has no attribute 'get'
2026-01-30 17:57:45,569 - trading_bot.rate_limiter - INFO - GlobalRateLimiter initialized: ['gemini', 'openai', 'anthropic', 'xai']
2026-01-30 17:57:49,921 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 17:57:50,049 - trading_bot.sentinels - INFO - Strict search for 'arabica prices' returned 0 posts. Trying broad search...
2026-01-30 17:57:50,200 - trading_bot.sentinels - INFO - Broad search returned 3 posts for 'arabica prices'
2026-01-30 17:57:51,054 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 17:57:51,168 - trading_bot.sentinels - INFO - Strict search for 'coffee futures' returned 0 posts. Trying broad search...
2026-01-30 17:57:51,188 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 17:57:51,271 - trading_bot.sentinels - INFO - Strict search for 'Brazil coffee harvest' returned 0 posts. Trying broad search...
2026-01-30 17:57:51,409 - trading_bot.sentinels - INFO - Broad search returned 2 posts for 'Brazil coffee harvest'
2026-01-30 17:57:51,495 - trading_bot.sentinels - INFO - Broad search returned 1 posts for 'coffee futures'
2026-01-30 17:57:54,676 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 17:57:54,793 - trading_bot.sentinels - INFO - Strict search for 'Colombia coffee' returned 0 posts. Trying broad search...
2026-01-30 17:57:55,102 - trading_bot.sentinels - INFO - Broad search returned 4 posts for 'Colombia coffee'
2026-01-30 17:57:55,125 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 17:57:55,214 - trading_bot.sentinels - INFO - Strict search for 'US coffee tariffs' returned 0 posts. Trying broad search...
2026-01-30 17:57:55,249 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 17:57:55,370 - trading_bot.sentinels - INFO - Broad search returned 2 posts for 'US coffee tariffs'
2026-01-30 17:57:55,777 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 17:57:55,939 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 17:58:00,373 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 17:58:00,919 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-30 18:08:02,154 - Orchestrator - WARNING - MICROSTRUCTURE ALERT: Liquidity Depletion: 49% of average
2026-01-30 18:08:02,484 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-01-30 18:20:00,000 - Orchestrator - INFO - --- Running scheduled task: close_stale_positions ---
2026-01-30 18:20:00,004 - OrderManager - INFO - --- Initiating position closing based on 2-day holding period ---
2026-01-30 18:20:00,004 - OrderManager - INFO - --- Weekly Close Triggered: Friday Weekly Close. Closing ALL positions. ---
2026-01-30 18:20:00,004 - trading_bot.connection_pool - INFO - Connecting IB (order_manager) ID: 144...
2026-01-30 18:20:00,400 - trading_bot.connection_pool - INFO - IB (order_manager) connected successfully with ID 144
2026-01-30 18:20:00,406 - trading_bot.utils - INFO - üõ†Ô∏è Configuring Market Data: Requesting LIVE (Type 1) Data.
2026-01-30 18:20:00,406 - OrderManager - INFO - Connected to IB for closing positions.
2026-01-30 18:20:00,510 - OrderManager - INFO - Found 14 live position legs in the IB account.
2026-01-30 18:20:00,535 - OrderManager - INFO - Reconstruction: KOH6 C3.45 | Trade Date: 2026-01-30 | Age: 1 | Qty: 1.0
2026-01-30 18:20:00,535 - OrderManager - INFO - Reconstruction: KOH6 C3.45 | Trade Date: 2026-01-30 | Age: 1 | Qty: 1.0
2026-01-30 18:20:00,537 - OrderManager - INFO - Reconstruction: KOH6 P3.3 | Trade Date: 2026-01-30 | Age: 1 | Qty: 1.0
2026-01-30 18:20:00,537 - OrderManager - INFO - Reconstruction: KOH6 P3.3 | Trade Date: 2026-01-30 | Age: 1 | Qty: 1.0
2026-01-30 18:20:00,539 - OrderManager - INFO - Reconstruction: KON6 C3.25 | Trade Date: 2026-01-30 | Age: 1 | Qty: 1.0
2026-01-30 18:20:00,540 - OrderManager - INFO - Reconstruction: KOK6 P3.15 | Trade Date: 2026-01-30 | Age: 1 | Qty: 1.0
2026-01-30 18:20:00,541 - OrderManager - INFO - Reconstruction: KOK6 C3.3 | Trade Date: 2026-01-30 | Age: 1 | Qty: 1.0
2026-01-30 18:20:00,543 - OrderManager - INFO - Reconstruction: KOH6 C3.5 | Trade Date: 2026-01-30 | Age: 1 | Qty: 1.0
2026-01-30 18:20:00,544 - OrderManager - INFO - Reconstruction: KOH6 C3.55 | Trade Date: 2026-01-29 | Age: 2 | Qty: 1.0
2026-01-30 18:20:00,546 - OrderManager - INFO - Reconstruction: KOH6 P3.4 | Trade Date: 2026-01-29 | Age: 2 | Qty: 1.0
2026-01-30 18:20:00,547 - OrderManager - INFO - Reconstruction: KOK6 C3.35 | Trade Date: 2026-01-30 | Age: 1 | Qty: 1.0
2026-01-30 18:20:00,549 - OrderManager - INFO - Reconstruction: KON6 P3.1 | Trade Date: 2026-01-30 | Age: 1 | Qty: 1.0
2026-01-30 18:20:00,550 - OrderManager - INFO - Reconstruction: KOK6 P3.2 | Trade Date: 2026-01-30 | Age: 1 | Qty: 1.0
2026-01-30 18:20:00,551 - OrderManager - INFO - Reconstruction: KON6 C3.3 | Trade Date: 2026-01-30 | Age: 1 | Qty: 1.0
2026-01-30 18:20:00,553 - OrderManager - INFO - Reconstruction: KON6 P3.15 | Trade Date: 2026-01-30 | Age: 1 | Qty: 1.0
2026-01-30 18:20:00,554 - OrderManager - INFO - Reconstruction: KOH6 P3.35 | Trade Date: 2026-01-30 | Age: 1 | Qty: 1.0
2026-01-30 18:20:00,554 - OrderManager - INFO - Processing closure for Position ID 667cda0e-b22b-4652-b745-8242e29b215b with 4 legs.
2026-01-30 18:20:00,554 - OrderManager - INFO - Constructed BAG order for Pos ID 667cda0e-b22b-4652-b745-8242e29b215b: ['SELL 1 x 745575680', 'BUY 1 x 731667756', 'BUY 1 x 743955518', 'SELL 1 x 745575678']
2026-01-30 18:20:02,557 - OrderManager - WARNING - Could not determine limit price for KC. Using Market Order.
2026-01-30 18:20:02,558 - root - INFO - Assigned new unique OrderRef for tracking: 91849c6d-8c71-4c73-90ba-b057a20fbde2
2026-01-30 18:20:02,558 - root - INFO - Placing BUY order for ...
2026-01-30 18:20:02,559 - root - INFO - Successfully placed order ID 1064 for .
2026-01-30 18:20:02,559 - OrderManager - INFO - Placed close order 1064 for Pos ID 667cda0e-b22b-4652-b745-8242e29b215b. Waiting for fill...
2026-01-30 18:20:04,562 - root - INFO - Skipping ledger entry for BAG contract KC (legs will be logged individually).
2026-01-30 18:20:04,562 - root - INFO - Logged 4 leg(s) to ledger for position_id 667cda0e-b22b-4652-b745-8242e29b215b (Stale Position Close)
2026-01-30 18:20:04,564 - OrderManager - INFO - Successfully closed Combo (Pos ID: 667cda0e-b22b-4652-b745-8242e29b215b). P&L: -730.6350000000002
2026-01-30 18:20:05,569 - OrderManager - INFO - Processing closure for Position ID da7f4ad0-2f3f-45af-a014-9461a33f56e4 with 2 legs.
2026-01-30 18:20:05,569 - OrderManager - INFO - Constructed BAG order for Pos ID da7f4ad0-2f3f-45af-a014-9461a33f56e4: ['SELL 1 x 745575680', 'BUY 1 x 731667756']
2026-01-30 18:20:07,572 - OrderManager - INFO - Placing LIMIT order for KC. Price: 3.35
2026-01-30 18:20:07,572 - root - INFO - Assigned new unique OrderRef for tracking: 9df3ee03-95d8-42ba-8097-827f2e95b16d
2026-01-30 18:20:07,572 - root - INFO - Placing BUY order for ...
2026-01-30 18:20:07,573 - root - INFO - Successfully placed order ID 1066 for .
2026-01-30 18:20:07,573 - OrderManager - INFO - Placed close order 1066 for Pos ID da7f4ad0-2f3f-45af-a014-9461a33f56e4. Waiting for fill...
2026-01-30 18:20:10,578 - root - INFO - Skipping ledger entry for BAG contract KC (legs will be logged individually).
2026-01-30 18:20:10,578 - root - INFO - Logged 2 leg(s) to ledger for position_id da7f4ad0-2f3f-45af-a014-9461a33f56e4 (Stale Position Close)
2026-01-30 18:20:10,578 - OrderManager - INFO - Successfully closed Combo (Pos ID: da7f4ad0-2f3f-45af-a014-9461a33f56e4). P&L: -2113.755
2026-01-30 18:20:11,581 - OrderManager - INFO - Processing closure for Position ID 4947b198-f21e-4778-a61b-1196ed2d573b with 4 legs.
2026-01-30 18:20:11,581 - OrderManager - INFO - Constructed BAG order for Pos ID 4947b198-f21e-4778-a61b-1196ed2d573b: ['SELL 1 x 745575745', 'BUY 1 x 698168715', 'BUY 1 x 742750213', 'SELL 1 x 745191407']
2026-01-30 18:20:13,586 - OrderManager - WARNING - Could not determine limit price for KC. Using Market Order.
2026-01-30 18:20:13,587 - root - INFO - Assigned new unique OrderRef for tracking: 3ae29501-943a-4a62-971b-2aa19a26f5cb
2026-01-30 18:20:13,587 - root - INFO - Placing BUY order for ...
2026-01-30 18:20:13,588 - root - INFO - Successfully placed order ID 1068 for .
2026-01-30 18:20:13,588 - OrderManager - INFO - Placed close order 1068 for Pos ID 4947b198-f21e-4778-a61b-1196ed2d573b. Waiting for fill...
2026-01-30 18:20:15,591 - root - INFO - Skipping ledger entry for BAG contract KC (legs will be logged individually).
2026-01-30 18:20:15,592 - root - INFO - Logged 4 leg(s) to ledger for position_id 4947b198-f21e-4778-a61b-1196ed2d573b (Stale Position Close)
2026-01-30 18:20:15,592 - OrderManager - INFO - Successfully closed Combo (Pos ID: 4947b198-f21e-4778-a61b-1196ed2d573b). P&L: -1291.2600000000002
2026-01-30 18:20:16,594 - OrderManager - INFO - Processing closure for Position ID e8fcdc8a-6507-4b60-a3dc-37b22843036b with 4 legs.
2026-01-30 18:20:16,595 - OrderManager - INFO - Constructed BAG order for Pos ID e8fcdc8a-6507-4b60-a3dc-37b22843036b: ['BUY 1 x 743955683', 'SELL 1 x 732415567', 'BUY 1 x 745575714', 'SELL 1 x 725781080']
2026-01-30 18:20:18,597 - OrderManager - WARNING - Could not determine limit price for KC. Using Market Order.
2026-01-30 18:20:18,597 - root - INFO - Assigned new unique OrderRef for tracking: 96705e09-5f95-4960-93a0-016904135dc0
2026-01-30 18:20:18,597 - root - INFO - Placing BUY order for ...
2026-01-30 18:20:18,599 - root - INFO - Successfully placed order ID 1070 for .
2026-01-30 18:20:18,599 - OrderManager - INFO - Placed close order 1070 for Pos ID e8fcdc8a-6507-4b60-a3dc-37b22843036b. Waiting for fill...
2026-01-30 18:20:48,637 - OrderManager - WARNING - Order 1070 for Pos ID e8fcdc8a-6507-4b60-a3dc-37b22843036b timed out or failed. Status: Submitted
2026-01-30 18:20:49,641 - OrderManager - INFO - Processing closure for Position ID 83a08625-78cd-4716-91da-c3f2b8e66d83 with 2 legs.
2026-01-30 18:20:49,641 - OrderManager - INFO - Constructed BAG order for Pos ID 83a08625-78cd-4716-91da-c3f2b8e66d83: ['BUY 1 x 757830272', 'SELL 1 x 742750187']
2026-01-30 18:20:51,645 - OrderManager - WARNING - Could not determine limit price for KC. Using Market Order.
2026-01-30 18:20:51,645 - root - INFO - Assigned new unique OrderRef for tracking: d9443df9-4f86-42dd-b8a7-f7cd04d59767
2026-01-30 18:20:51,645 - root - INFO - Placing BUY order for ...
2026-01-30 18:20:51,647 - root - INFO - Successfully placed order ID 1072 for .
2026-01-30 18:20:51,648 - OrderManager - INFO - Placed close order 1072 for Pos ID 83a08625-78cd-4716-91da-c3f2b8e66d83. Waiting for fill...
2026-01-30 18:21:04,664 - root - INFO - Skipping ledger entry for BAG contract KC (legs will be logged individually).
2026-01-30 18:21:04,664 - root - INFO - Logged 2 leg(s) to ledger for position_id 83a08625-78cd-4716-91da-c3f2b8e66d83 (Stale Position Close)
2026-01-30 18:21:04,665 - OrderManager - INFO - Successfully closed Combo (Pos ID: 83a08625-78cd-4716-91da-c3f2b8e66d83). P&L: 3306.87
2026-01-30 18:21:05,976 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-01-30 18:21:05,978 - Orchestrator - INFO - Next task 'cancel_and_stop_monitoring' scheduled for 2026-01-30 18:35:00 UTC. Waiting for 0.23 hours.
