Starting orchestrator from /home/rodrigo/real_options...
2026-02-11 17:41:47,966 - Orchestrator - INFO - =============================================
2026-02-11 17:41:47,968 - Orchestrator - INFO - === Starting the Trading Bot Orchestrator ===
2026-02-11 17:41:47,968 - Orchestrator - INFO - =============================================
2026-02-11 17:41:47,970 - Orchestrator - INFO - Budget Guard initialized. Daily limit: $15.0
2026-02-11 17:41:47,970 - trading_bot.drawdown_circuit_breaker - INFO - Loaded drawdown state: NORMAL (0.00%)
2026-02-11 17:41:47,971 - Orchestrator - INFO - Drawdown Guard initialized.
2026-02-11 17:41:47,971 - Orchestrator - INFO - Expiry filter window: 45-365 DTE
2026-02-11 17:41:48,123 - Orchestrator - INFO - --- Processing Deferred Triggers ---
2026-02-11 17:41:48,126 - Orchestrator - INFO - No deferred triggers to process.
2026-02-11 17:41:48,126 - Orchestrator - INFO - Environment: DEV. Applying -30 minute 'Civil War' avoidance offset.
2026-02-11 17:41:48,131 - Orchestrator - WARNING - ‚ö†Ô∏è LATE START DETECTED: 10 scheduled tasks already passed:
  - 03:00 ET: start_monitoring
  - 03:01 ET: process_deferred_triggers
  - 04:30 ET: cleanup_orphaned_theses
  - 08:00 ET: run_position_audit_cycle
  - 08:30 ET: guarded_generate_orders
  - 10:30 ET: close_stale_positions
  - 10:45 ET: run_position_audit_cycle
  - 11:15 ET: guarded_generate_orders
  - 12:15 ET: close_stale_positions_fallback
  - 12:30 ET: run_position_audit_cycle
2026-02-11 17:41:48,132 - Orchestrator - INFO - --- Recovery: Evaluating 10 missed tasks ---
2026-02-11 17:41:48,132 - Orchestrator - INFO - üîÑ RECOVERY: Running missed start_monitoring (was scheduled 03:00 ET)
2026-02-11 17:41:48,132 - Orchestrator - INFO - System shutdown flag CLEARED ‚Äî new trading day beginning
2026-02-11 17:41:48,134 - Orchestrator - INFO - --- Starting position monitoring process ---
2026-02-11 17:41:48,139 - Orchestrator - INFO - Successfully started position monitor with PID: 1416126
2026-02-11 17:41:48,139 - Orchestrator - INFO - Started position monitoring service.
2026-02-11 17:41:48,143 - Orchestrator - INFO - ‚úÖ RECOVERY: start_monitoring completed
2026-02-11 17:41:48,145 - Orchestrator - INFO - ‚úÖ ALREADY RAN: process_deferred_triggers completed earlier today (before restart). Skipping re-execution.
2026-02-11 17:41:48,145 - Orchestrator - INFO - üîÑ RECOVERY: Running missed cleanup_orphaned_theses (was scheduled 04:30 ET)
2026-02-11 17:41:48,145 - Orchestrator - INFO - --- AUTOMATED THESIS CLEANUP ---
2026-02-11 17:41:48,148 - trading_bot.connection_pool - INFO - Connecting IB (cleanup) ID: 273...
2026-02-11 17:41:48,654 - trading_bot.connection_pool - INFO - IB (cleanup) connected successfully with ID 273
2026-02-11 17:41:48,704 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2026-02-11 17:41:48,909 - trading_bot.tms - INFO - TMS initialized at ./data/tms
2026-02-11 17:41:49,069 - Orchestrator - INFO - Thesis cleanup: no orphans found
2026-02-11 17:41:49,070 - trading_bot.connection_pool - INFO - Disconnecting IB (cleanup)...
2026-02-11 17:41:52,085 - Orchestrator - INFO - ‚úÖ RECOVERY: cleanup_orphaned_theses completed
2026-02-11 17:41:52,086 - Orchestrator - INFO - üîÑ RECOVERY: Running missed run_position_audit_cycle (was scheduled 08:00 ET)
2026-02-11 17:41:52,086 - Orchestrator - INFO - --- POSITION AUDIT CYCLE (Scheduled) ---
2026-02-11 17:41:52,087 - trading_bot.connection_pool - INFO - Connecting IB (audit) ID: 231...
2026-02-11 17:41:52,681 - trading_bot.connection_pool - INFO - IB (audit) connected successfully with ID 231
2026-02-11 17:41:52,687 - trading_bot.utils - INFO - üõ†Ô∏è FORCE_DELAYED_DATA enabled: Using Delayed Market Data (Type 3)
2026-02-11 17:41:52,722 - trading_bot.tms - INFO - TMS initialized at ./data/tms
2026-02-11 17:41:52,768 - Orchestrator - INFO - State stores reconciled: 0 positions across all stores
2026-02-11 17:41:52,778 - Orchestrator - INFO - No open positions to audit.
2026-02-11 17:41:52,779 - trading_bot.connection_pool - INFO - Disconnecting IB (audit)...
2026-02-11 17:41:53,338 - Orchestrator - INFO - 2026-02-11 17:41:53,338 - trading_bot.connection_pool - INFO - Connecting IB (monitor) ID: 137...
2026-02-11 17:41:53,498 - Orchestrator - INFO - 2026-02-11 17:41:53,498 - trading_bot.connection_pool - INFO - IB (monitor) connected successfully with ID 137
2026-02-11 17:41:53,503 - Orchestrator - INFO - 2026-02-11 17:41:53,503 - trading_bot.utils - INFO - üõ†Ô∏è FORCE_DELAYED_DATA enabled: Using Delayed Market Data (Type 3)
2026-02-11 17:41:53,504 - Orchestrator - INFO - 2026-02-11 17:41:53,503 - __main__ - INFO - Position monitor connected and watching open positions.
2026-02-11 17:41:53,504 - Orchestrator - INFO - 2026-02-11 17:41:53,504 - root - INFO - Starting intraday P&L monitor. Stop: 50% (Max Risk), Profit: 80% (Capture), Interval: 600s
2026-02-11 17:41:53,504 - Orchestrator - INFO - 2026-02-11 17:41:53,504 - root - INFO - Order status and execution event handlers registered.
2026-02-11 17:41:55,788 - Orchestrator - INFO - ‚úÖ RECOVERY: run_position_audit_cycle completed
2026-02-11 17:41:55,788 - Orchestrator - INFO - ‚úÖ ALREADY RAN: guarded_generate_orders completed earlier today (before restart). Skipping re-execution.
2026-02-11 17:41:55,789 - Orchestrator - INFO - üîÑ RECOVERY: Running missed close_stale_positions (was scheduled 10:30 ET)
2026-02-11 17:41:55,789 - OrderManager - INFO - --- Initiating position closing based on 2-day holding period ---
2026-02-11 17:41:55,789 - trading_bot.connection_pool - INFO - Connecting IB (orchestrator_orders) ID: 144...
2026-02-11 17:41:56,156 - trading_bot.connection_pool - INFO - IB (orchestrator_orders) connected successfully with ID 144
2026-02-11 17:41:56,160 - trading_bot.utils - INFO - üõ†Ô∏è FORCE_DELAYED_DATA enabled: Using Delayed Market Data (Type 3)
2026-02-11 17:41:56,161 - OrderManager - INFO - Connected to IB for closing positions (purpose: orchestrator_orders).
2026-02-11 17:41:56,164 - OrderManager - INFO - No open positions found in the IB account. Nothing to close.
2026-02-11 17:41:56,164 - trading_bot.connection_pool - INFO - Disconnecting IB (orchestrator_orders)...
2026-02-11 17:41:59,168 - Orchestrator - INFO - ‚úÖ RECOVERY: close_stale_positions completed
2026-02-11 17:41:59,169 - Orchestrator - INFO - üîÑ RECOVERY: Running missed close_stale_positions_fallback (was scheduled 12:15 ET)
2026-02-11 17:41:59,169 - Orchestrator - INFO - --- Fallback Close Attempt (12:45 ET) ---
2026-02-11 17:41:59,169 - Orchestrator - INFO - This is a retry for any positions the 11:00 primary close failed to handle.
2026-02-11 17:41:59,169 - OrderManager - INFO - --- Initiating position closing based on 2-day holding period ---
2026-02-11 17:41:59,169 - OrderManager - WARNING - close_stale_positions connection attempt 1/3 failed: Connection orchestrator_orders in backoff period. Retrying in 5.0s...
2026-02-11 17:41:59,169 - trading_bot.connection_pool - WARNING - FORCE RESETTING connection: orchestrator_orders
2026-02-11 17:42:04,175 - trading_bot.connection_pool - INFO - Connecting IB (orchestrator_orders) ID: 144...
2026-02-11 17:42:04,630 - trading_bot.connection_pool - INFO - IB (orchestrator_orders) connected successfully with ID 144
2026-02-11 17:42:04,635 - trading_bot.utils - INFO - üõ†Ô∏è FORCE_DELAYED_DATA enabled: Using Delayed Market Data (Type 3)
2026-02-11 17:42:04,635 - OrderManager - INFO - Connected to IB for closing positions (purpose: orchestrator_orders).
2026-02-11 17:42:04,638 - OrderManager - INFO - No open positions found in the IB account. Nothing to close.
2026-02-11 17:42:04,638 - trading_bot.connection_pool - INFO - Disconnecting IB (orchestrator_orders)...
2026-02-11 17:42:07,644 - Orchestrator - INFO - ‚úÖ RECOVERY: close_stale_positions_fallback completed
2026-02-11 17:42:07,645 - Orchestrator - INFO - System restarted with 7 missed tasks.
‚úÖ 5 recovered | ‚è≠Ô∏è 0 skipped | ‚úîÔ∏è 2 already ran
2026-02-11 17:42:07,853 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-11 17:42:08,221 - Orchestrator - INFO - Running TopicDiscoveryAgent on startup...
2026-02-11 17:42:08,273 - trading_bot.topic_discovery - INFO - Starting Topic Discovery Scan...
2026-02-11 17:42:21,085 - trading_bot.tms - INFO - TMS initialized at ./data/tms
2026-02-11 17:42:21,096 - Orchestrator - INFO - Startup TopicDiscovery: 3 topics, No changes
2026-02-11 17:42:21,098 - Orchestrator - INFO - Next task 'emergency_hard_close' scheduled for 2026-02-11 17:45:00 UTC. Waiting for 0.04 hours.
2026-02-11 17:42:21,098 - Orchestrator - INFO - --- Starting Sentinel Array ---
2026-02-11 17:42:21,099 - trading_bot.sentinels - INFO - WeatherSentinel: Loaded 8 active alerts from disk (normalized from 8)
2026-02-11 17:42:21,188 - trading_bot.sentinels - INFO - LogisticsSentinel: Generated 5 RSS URLs for Coffee (Arabica)
2026-02-11 17:42:21,189 - trading_bot.sentinels - INFO - LogisticsSentinel initialized with model: gemini-3-flash-preview | 5 RSS feeds | Commodity: Coffee (Arabica)
2026-02-11 17:42:21,276 - trading_bot.sentinels - INFO - NewsSentinel: Generated 5 RSS URLs for Coffee (Arabica)
2026-02-11 17:42:21,276 - trading_bot.sentinels - INFO - NewsSentinel initialized with model: gemini-3-flash-preview | 5 RSS feeds | Threshold: 8 | Commodity: Coffee (Arabica)
2026-02-11 17:42:21,307 - trading_bot.sentinels - INFO - XSentimentSentinel: Loaded volume baseline (mean=10.5, n=11)
2026-02-11 17:42:21,308 - trading_bot.sentinels - INFO - XSentimentSentinel initialized with model: grok-4-1-fast-reasoning
2026-02-11 17:42:21,308 - trading_bot.sentinels - INFO - Loaded state for 5 prediction market topics
2026-02-11 17:42:21,308 - trading_bot.sentinels - WARNING - Stale/misaligned slug for 'Will tariffs generate >$250b in 2025?': title='Test Coffee Market'. Clearing cache.
2026-02-11 17:42:21,309 - trading_bot.sentinels - WARNING - Stale/misaligned slug for 'Federal Reserve Interest Rate': title='Fed Test'. Clearing cache.
2026-02-11 17:42:21,309 - trading_bot.sentinels - INFO - Reloading prediction market topics...
2026-02-11 17:42:21,309 - trading_bot.sentinels - INFO - Pruning orphaned cache entry: 'Test topic'
2026-02-11 17:42:21,314 - trading_bot.sentinels - INFO - Pruned 1 orphaned cache entries
2026-02-11 17:42:21,315 - trading_bot.sentinels - INFO - Topics reloaded: 3
2026-02-11 17:42:21,315 - trading_bot.sentinels - INFO - PredictionMarketSentinel v2.0 initialized: 3 topics
2026-02-11 17:42:21,403 - trading_bot.self_healing - INFO - Self-Healing Monitor started
2026-02-11 17:42:21,405 - Orchestrator - CRITICAL - SENTINEL TASK DIED: 'NoneType' object has no attribute 'info'
2026-02-11 17:45:00,093 - Orchestrator - INFO - --- Running scheduled task: emergency_hard_close ---
2026-02-11 17:45:00,097 - Orchestrator - INFO - --- Emergency Hard Close Check (T-45 min) ---
2026-02-11 17:45:00,097 - trading_bot.connection_pool - INFO - Connecting IB (orchestrator_orders) ID: 144...
2026-02-11 17:45:00,418 - trading_bot.connection_pool - INFO - IB (orchestrator_orders) connected successfully with ID 144
2026-02-11 17:45:00,475 - trading_bot.utils - INFO - üõ†Ô∏è FORCE_DELAYED_DATA enabled: Using Delayed Market Data (Type 3)
2026-02-11 17:45:00,576 - Orchestrator - INFO - Emergency hard close: No open positions. All clear. ‚úì
2026-02-11 17:45:00,577 - trading_bot.connection_pool - INFO - Disconnecting IB (orchestrator_orders)...
2026-02-11 17:45:03,586 - Orchestrator - INFO - Next task 'cancel_and_stop_monitoring' scheduled for 2026-02-11 18:15:00 UTC. Waiting for 0.50 hours.
