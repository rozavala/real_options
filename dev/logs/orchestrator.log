2026-01-19 18:45:59.415762: I external/local_xla/xla/tsl/cuda/cudart_stub.cc:31] Could not find cuda drivers on your machine, GPU will not be used.
2026-01-19 18:45:59.485989: I tensorflow/core/platform/cpu_feature_guard.cc:210] This TensorFlow binary is optimized to use available CPU instructions in performance-critical operations.
To enable the following instructions: AVX2 FMA, in other operations, rebuild TensorFlow with the appropriate compiler flags.
2026-01-19 18:46:02.461362: I external/local_xla/xla/tsl/cuda/cudart_stub.cc:31] Could not find cuda drivers on your machine, GPU will not be used.
2026-01-19 18:46:06,276 - Orchestrator - INFO - =============================================
2026-01-19 18:46:06,277 - Orchestrator - INFO - === Starting the Trading Bot Orchestrator ===
2026-01-19 18:46:06,277 - Orchestrator - INFO - =============================================
2026-01-19 18:46:06,302 - Orchestrator - INFO - --- Processing Deferred Triggers ---
2026-01-19 18:46:06,303 - Orchestrator - INFO - No deferred triggers to process.
2026-01-19 18:46:06,303 - Orchestrator - INFO - Environment: DEV. Applying -10 minute 'Civil War' avoidance offset.
2026-01-19 18:46:06,303 - Orchestrator - INFO - Next task 'log_equity_snapshot' scheduled for 2026-01-19 18:55:00 UTC. Waiting for 0.15 hours.
2026-01-19 18:46:06,303 - Orchestrator - INFO - --- Starting Sentinel Array ---
2026-01-19 18:46:06,304 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 18:46:36,324 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:46:36,324 - Orchestrator - ERROR - Sentinel IB Connection Failed: 
2026-01-19 18:46:37,009 - trading_bot.sentinels - INFO - XSentimentSentinel initialized with model: grok-4-1-fast-reasoning
2026-01-19 18:46:37,010 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 18:46:37,010 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 18:47:07,038 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:47:07,038 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 18:47:07,038 - Orchestrator - INFO - Market Open: Engaging Microstructure Sentinel
2026-01-19 18:47:07,039 - trading_bot.connection_pool - INFO - Connecting IB (microstructure) ID: 200...
2026-01-19 18:47:37,049 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:47:37,049 - Orchestrator - ERROR - Failed to engage MicrostructureSentinel: 
2026-01-19 18:47:38,929 - trading_bot.sentinels - WARNING - WEATHER SENTINEL TRIGGERED: Drought Risk in Dak Lak (Vietnam): 10 days with < 5.0mm rain
2026-01-19 18:47:38,938 - trading_bot.state_manager - INFO - Logged sentinel event from WeatherSentinel to history.
2026-01-19 18:47:38,938 - Orchestrator - INFO - ðŸš¨ EMERGENCY CYCLE TRIGGERED by WeatherSentinel: Drought Risk in Dak Lak (Vietnam): 10 days with < 5.0mm rain
2026-01-19 18:47:39,249 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-01-19 18:47:39,273 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2026-01-19 18:47:39,364 - trading_bot.tms - INFO - TMS initialized at ./data/tms
2026-01-19 18:47:39,471 - trading_bot.heterogeneous_router - INFO - ResponseCache initialized with env=DEV, multiplier=0.25
2026-01-19 18:47:39,471 - trading_bot.heterogeneous_router - INFO - HeterogeneousRouter initialized. Available: ['gemini', 'openai', 'anthropic', 'xai']
2026-01-19 18:47:39,471 - trading_bot.agents - INFO - Heterogeneous routing enabled. Diversity: {'available_providers': ['gemini', 'openai', 'anthropic', 'xai'], 'diversity_score': 1.0}
2026-01-19 18:47:39,476 - trading_bot.tms - INFO - TMS initialized at ./data/tms
2026-01-19 18:47:39,476 - trading_bot.agents - INFO - Coffee Council initialized. Agents: gemini-3-pro-preview, Master: gemini-3-pro-preview
2026-01-19 18:47:39,476 - root - INFO - Fetching 2 active futures contracts for KC on NYBOT...
2026-01-19 18:47:39,477 - root - ERROR - Error fetching active futures: Not connected
2026-01-19 18:47:39,477 - Orchestrator - ERROR - No active futures found for emergency cycle.
2026-01-19 18:47:39,477 - Orchestrator - INFO - Post-cycle debounce set for 1800s
2026-01-19 18:47:46,294 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 18:47:46,303 - trading_bot.sentinels - WARNING - Empty response from Grok for query 'coffee supply chain'
2026-01-19 18:47:46,575 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 18:47:46,576 - trading_bot.sentinels - WARNING - Empty response from Grok for query 'coffee frost Brazil'
2026-01-19 18:47:46,593 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 18:47:46,595 - trading_bot.sentinels - WARNING - Empty response from Grok for query 'robusta coffee'
2026-01-19 18:47:46,896 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 18:47:46,897 - trading_bot.sentinels - WARNING - Empty response from Grok for query 'Santos port coffee'
2026-01-19 18:47:46,969 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 18:47:46,970 - trading_bot.sentinels - WARNING - Empty response from Grok for query 'ICE coffee warehouse'
2026-01-19 18:47:47,314 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 18:47:47,315 - trading_bot.sentinels - WARNING - Empty response from Grok for query 'arabica prices'
2026-01-19 18:47:47,701 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 18:47:47,703 - trading_bot.sentinels - WARNING - Empty response from Grok for query 'Colombia coffee'
2026-01-19 18:47:47,724 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 18:47:47,725 - trading_bot.sentinels - WARNING - Empty response from Grok for query 'coffee futures'
2026-01-19 18:47:48,262 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 18:47:48,263 - trading_bot.sentinels - WARNING - Empty response from Grok for query 'Brazil coffee harvest'
2026-01-19 18:47:48,548 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 18:47:48,550 - trading_bot.sentinels - WARNING - Empty response from Grok for query 'KC futures'
2026-01-19 18:47:48,577 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 18:47:48,580 - trading_bot.sentinels - WARNING - Empty response from Grok for query 'CFTC coffee positioning'
2026-01-19 18:47:51,186 - httpx - INFO - HTTP Request: POST https://api.x.ai/v1/chat/completions "HTTP/1.1 200 OK"
2026-01-19 18:47:51,187 - trading_bot.sentinels - WARNING - Empty response from Grok for query 'Vietnam robusta'
2026-01-19 18:48:51,247 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 18:48:51,248 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 18:49:21,265 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:49:21,265 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 18:49:21,265 - Orchestrator - INFO - Market Open: Engaging Microstructure Sentinel
2026-01-19 18:49:21,267 - trading_bot.connection_pool - INFO - Connecting IB (microstructure) ID: 200...
2026-01-19 18:49:51,295 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:49:51,295 - Orchestrator - ERROR - Failed to engage MicrostructureSentinel: 
2026-01-19 18:50:51,345 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 18:50:51,345 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 18:51:21,375 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:51:21,376 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 18:51:21,376 - Orchestrator - INFO - Market Open: Engaging Microstructure Sentinel
2026-01-19 18:51:21,377 - trading_bot.connection_pool - INFO - Connecting IB (microstructure) ID: 200...
2026-01-19 18:51:51,399 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:51:51,399 - Orchestrator - ERROR - Failed to engage MicrostructureSentinel: 
2026-01-19 18:52:51,405 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 18:52:51,406 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 18:53:21,425 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:53:21,425 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 18:53:21,425 - Orchestrator - INFO - Market Open: Engaging Microstructure Sentinel
2026-01-19 18:53:21,427 - trading_bot.connection_pool - INFO - Connecting IB (microstructure) ID: 200...
2026-01-19 18:53:51,434 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:53:51,434 - Orchestrator - ERROR - Failed to engage MicrostructureSentinel: 
2026-01-19 18:54:51,492 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 18:54:51,492 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 18:55:00,009 - Orchestrator - INFO - --- Running scheduled task: log_equity_snapshot ---
2026-01-19 18:55:00,009 - EquityLogger - INFO - --- Starting Equity Snapshot Logging ---
2026-01-19 18:55:00,010 - EquityLogger - INFO - Connecting to IB at 127.0.0.1:7497 with clientId 5703...
2026-01-19 18:55:04,014 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:55:04,015 - EquityLogger - ERROR - Failed to log equity snapshot: 
2026-01-19 18:55:04,015 - Orchestrator - INFO - Next task 'reconcile_and_analyze' scheduled for 2026-01-19 19:05:00 UTC. Waiting for 0.17 hours.
2026-01-19 18:55:21,511 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:55:21,511 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 18:55:21,511 - Orchestrator - INFO - Market Open: Engaging Microstructure Sentinel
2026-01-19 18:55:21,512 - trading_bot.connection_pool - INFO - Connecting IB (microstructure) ID: 200...
2026-01-19 18:55:51,537 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:55:51,537 - Orchestrator - ERROR - Failed to engage MicrostructureSentinel: 
2026-01-19 18:56:51,597 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 18:56:51,597 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 18:57:21,599 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:57:21,599 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 18:57:21,599 - Orchestrator - INFO - Market Open: Engaging Microstructure Sentinel
2026-01-19 18:57:21,600 - trading_bot.connection_pool - INFO - Connecting IB (microstructure) ID: 200...
2026-01-19 18:57:51,620 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:57:51,620 - Orchestrator - ERROR - Failed to engage MicrostructureSentinel: 
2026-01-19 18:58:51,679 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 18:58:51,680 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 18:59:21,708 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:59:21,708 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 18:59:21,708 - Orchestrator - INFO - Market Open: Engaging Microstructure Sentinel
2026-01-19 18:59:21,708 - trading_bot.connection_pool - INFO - Connecting IB (microstructure) ID: 200...
2026-01-19 18:59:51,738 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 18:59:51,739 - Orchestrator - ERROR - Failed to engage MicrostructureSentinel: 
2026-01-19 19:00:51,794 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:00:51,795 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:01:21,810 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:01:21,810 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 19:02:21,850 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:02:21,853 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:02:51,882 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:02:51,883 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 19:03:51,944 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:03:51,945 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:04:21,956 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:04:21,957 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 19:05:00,023 - Orchestrator - INFO - --- Running scheduled task: reconcile_and_analyze ---
2026-01-19 19:05:00,026 - Orchestrator - INFO - --- Kicking off end-of-day reconciliation and analysis process ---
2026-01-19 19:05:00,026 - EquityLogger - INFO - --- Starting Equity Synchronization from Flex Query ---
2026-01-19 19:05:00,062 - TradeReconciler - INFO - Requesting Flex Query report (Query ID: 1341111)...
2026-01-19 19:05:00,361 - httpx - INFO - HTTP Request: GET https://gdcdyn.interactivebrokers.com/Universal/servlet/FlexStatementService.SendRequest?t=919200949761516752736221&q=1341111&v=3 "HTTP/1.1 200 OK"
2026-01-19 19:05:00,362 - TradeReconciler - INFO - Successfully requested report. Reference Code: 6775547042
2026-01-19 19:05:10,373 - TradeReconciler - INFO - Polling for report (Attempt 1/10)...
2026-01-19 19:05:10,521 - httpx - INFO - HTTP Request: GET https://gdcdyn.interactivebrokers.com/Universal/servlet/FlexStatementService.GetStatement?t=919200949761516752736221&q=6775547042&v=3 "HTTP/1.1 200 OK"
2026-01-19 19:05:10,522 - TradeReconciler - INFO - Successfully downloaded Flex Query report.
2026-01-19 19:05:10,539 - EquityLogger - INFO - Successfully synced 23 equity records to data/daily_equity.csv.
2026-01-19 19:05:10,539 - Orchestrator - INFO - --- Starting trade reconciliation ---
2026-01-19 19:05:10,539 - TradeReconciler - INFO - Starting trade reconciliation using Flex Queries.
2026-01-19 19:05:10,540 - TradeReconciler - INFO - Fetching report for Query ID: 1328326
2026-01-19 19:05:10,572 - TradeReconciler - INFO - Requesting Flex Query report (Query ID: 1328326)...
2026-01-19 19:05:10,742 - httpx - INFO - HTTP Request: GET https://gdcdyn.interactivebrokers.com/Universal/servlet/FlexStatementService.SendRequest?t=919200949761516752736221&q=1328326&v=3 "HTTP/1.1 200 OK"
2026-01-19 19:05:10,743 - TradeReconciler - INFO - Successfully requested report. Reference Code: 5911473742
2026-01-19 19:05:20,752 - TradeReconciler - INFO - Polling for report (Attempt 1/10)...
2026-01-19 19:05:20,902 - httpx - INFO - HTTP Request: GET https://gdcdyn.interactivebrokers.com/Universal/servlet/FlexStatementService.GetStatement?t=919200949761516752736221&q=5911473742&v=3 "HTTP/1.1 200 OK"
2026-01-19 19:05:20,903 - TradeReconciler - INFO - Successfully downloaded Flex Query report.
2026-01-19 19:05:20,905 - TradeReconciler - INFO - Parsed 44 executions from the Flex Query report.
2026-01-19 19:05:20,931 - TradeReconciler - INFO - Successfully processed 44 trades into the reconciliation DataFrame.
2026-01-19 19:05:20,931 - TradeReconciler - INFO - Fetching report for Query ID: 1331422
2026-01-19 19:05:20,964 - TradeReconciler - INFO - Requesting Flex Query report (Query ID: 1331422)...
2026-01-19 19:05:21,111 - httpx - INFO - HTTP Request: GET https://gdcdyn.interactivebrokers.com/Universal/servlet/FlexStatementService.SendRequest?t=919200949761516752736221&q=1331422&v=3 "HTTP/1.1 200 OK"
2026-01-19 19:05:21,112 - TradeReconciler - INFO - Successfully requested report. Reference Code: 7265571685
2026-01-19 19:05:21,959 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:05:21,960 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:05:31,123 - TradeReconciler - INFO - Polling for report (Attempt 1/10)...
2026-01-19 19:05:31,332 - httpx - INFO - HTTP Request: GET https://gdcdyn.interactivebrokers.com/Universal/servlet/FlexStatementService.GetStatement?t=919200949761516752736221&q=7265571685&v=3 "HTTP/1.1 200 OK"
2026-01-19 19:05:31,333 - TradeReconciler - INFO - Successfully downloaded Flex Query report.
2026-01-19 19:05:31,336 - TradeReconciler - INFO - Parsed 0 executions from the Flex Query report.
2026-01-19 19:05:31,336 - TradeReconciler - WARNING - Flex Query report contained no data.
2026-01-19 19:05:31,339 - TradeReconciler - INFO - Consolidated to 44 unique trades from all reports.
2026-01-19 19:05:31,339 - TradeReconciler - INFO - Found 0 archived ledger files.
2026-01-19 19:05:31,339 - TradeReconciler - WARNING - No trade ledger data found.
2026-01-19 19:05:31,340 - TradeReconciler - WARNING - Local trade ledger is empty. All fetched IB trades will be considered missing.
2026-01-19 19:05:31,342 - TradeReconciler - INFO - Filtered IB trades from 44 to 44 records within the last 33 days.
2026-01-19 19:05:31,342 - TradeReconciler - WARNING - Local ledger is empty. All IB trades will be marked as missing.
2026-01-19 19:05:31,343 - TradeReconciler - INFO - Discrepancies found. Writing to output files.
2026-01-19 19:05:31,349 - TradeReconciler - INFO - Successfully wrote 44 missing trade(s) to '/home/rodrigo/real_options/archive_ledger/trade_ledger_missing_trades.csv'.
2026-01-19 19:05:31,349 - Orchestrator - WARNING - Trade reconciliation found discrepancies.
2026-01-19 19:05:31,602 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-01-19 19:05:31,604 - TradeReconciler - INFO - Starting Active Position Reconciliation...
2026-01-19 19:05:31,665 - TradeReconciler - INFO - Requesting Flex Query report (Query ID: 1341164)...
2026-01-19 19:05:31,848 - httpx - INFO - HTTP Request: GET https://gdcdyn.interactivebrokers.com/Universal/servlet/FlexStatementService.SendRequest?t=919200949761516752736221&q=1341164&v=3 "HTTP/1.1 200 OK"
2026-01-19 19:05:31,849 - TradeReconciler - INFO - Successfully requested report. Reference Code: 4197496135
2026-01-19 19:05:41,850 - TradeReconciler - INFO - Polling for report (Attempt 1/10)...
2026-01-19 19:05:41,990 - httpx - INFO - HTTP Request: GET https://gdcdyn.interactivebrokers.com/Universal/servlet/FlexStatementService.GetStatement?t=919200949761516752736221&q=4197496135&v=3 "HTTP/1.1 200 OK"
2026-01-19 19:05:41,991 - TradeReconciler - INFO - Successfully downloaded Flex Query report.
2026-01-19 19:05:41,995 - TradeReconciler - INFO - Parsed 0 positions from the Flex Query report.
2026-01-19 19:05:41,995 - TradeReconciler - INFO - Found 1 archived ledger files.
2026-01-19 19:05:41,999 - TradeReconciler - INFO - Consolidated a total of 44 trades from all ledgers.
2026-01-19 19:05:42,012 - TradeReconciler - INFO - Active Position Reconciliation complete. No discrepancies found.
2026-01-19 19:05:42,012 - trading_bot.reconciliation - INFO - --- Starting Council History Reconciliation ---
2026-01-19 19:05:46,024 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:05:46,024 - trading_bot.reconciliation - ERROR - Failed to connect to IB for reconciliation: 
2026-01-19 19:05:46,024 - Orchestrator - INFO - --- Initiating end-of-day analysis and archiving ---
2026-01-19 19:05:46,025 - PerformanceAnalyzer - INFO - --- Consolidating Trade Ledgers ---
2026-01-19 19:05:46,026 - PerformanceAnalyzer - INFO - Found 1 archived trade ledger(s).
2026-01-19 19:05:46,026 - PerformanceAnalyzer - INFO - Loading archived ledger: trade_ledger_missing_trades.csv
2026-01-19 19:05:46,029 - PerformanceAnalyzer - INFO - Consolidated a total of 44 trade records.
2026-01-19 19:05:46,033 - PerformanceAnalyzer - INFO - --- Starting Daily Performance Analysis ---
2026-01-19 19:05:51,965 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:05:51,965 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 19:06:01,044 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:06:01,044 - PerformanceAnalyzer - ERROR - Connection to IB timed out during live data fetch.
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
  File "/home/rodrigo/real_options/venv/lib/python3.12/site-packages/ib_insync/connection.py", line 39, in connectAsync
    self.transport, _ = await loop.create_connection(
                        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/base_events.py", line 1104, in create_connection
    sock = await self._connect_sock(
           ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.12/asyncio/base_events.py", line 1007, in _connect_sock
    await self.sock_connect(sock, address)
  File "/usr/lib/python3.12/asyncio/selector_events.py", line 651, in sock_connect
    return await fut
           ^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rodrigo/real_options/performance_analyzer.py", line 80, in get_live_account_data
    await ib.connectAsync(
  File "/home/rodrigo/real_options/venv/lib/python3.12/site-packages/ib_insync/ib.py", line 1748, in connectAsync
    await self.client.connectAsync(host, port, clientId, timeout)
  File "/home/rodrigo/real_options/venv/lib/python3.12/site-packages/ib_insync/client.py", line 211, in connectAsync
    await asyncio.wait_for(self.conn.connectAsync(host, port), timeout)
  File "/usr/lib/python3.12/asyncio/tasks.py", line 519, in wait_for
    async with timeouts.timeout(timeout):
  File "/usr/lib/python3.12/asyncio/timeouts.py", line 115, in __aexit__
    raise TimeoutError from exc_val
TimeoutError
2026-01-19 19:06:01,054 - PerformanceAnalyzer - INFO - Loading daily_equity.csv for equity curve.
2026-01-19 19:06:01,057 - PerformanceAnalyzer - INFO - Dynamic Starting Capital from History: $114,553.22
2026-01-19 19:06:01,058 - PerformanceAnalyzer - WARNING - Using last recorded equity for LTD P&L (Live NetLiq unavailable).
2026-01-19 19:06:01,647 - PerformanceAnalyzer - ERROR - An error occurred during performance analysis: incompatible merge keys [0] dtype('<M8[ns]') and datetime64[ns, UTC], must be the same type
Traceback (most recent call last):
  File "/home/rodrigo/real_options/performance_analyzer.py", line 433, in analyze_performance
    chart_paths = generate_performance_charts(trade_df, signals_df, equity_df, starting_capital)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rodrigo/real_options/trading_bot/performance_graphs.py", line 118, in generate_performance_charts
    merged_df = pd.merge_asof(trade_df.sort_values('timestamp'), signals_df.sort_values('timestamp'), on='timestamp', direction='backward')
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rodrigo/real_options/venv/lib/python3.12/site-packages/pandas/core/reshape/merge.py", line 691, in merge_asof
    op = _AsOfMerge(
         ^^^^^^^^^^^
  File "/home/rodrigo/real_options/venv/lib/python3.12/site-packages/pandas/core/reshape/merge.py", line 2000, in __init__
    _OrderedMerge.__init__(
  File "/home/rodrigo/real_options/venv/lib/python3.12/site-packages/pandas/core/reshape/merge.py", line 1912, in __init__
    _MergeOperation.__init__(
  File "/home/rodrigo/real_options/venv/lib/python3.12/site-packages/pandas/core/reshape/merge.py", line 802, in __init__
    self._maybe_require_matching_dtypes(self.left_join_keys, self.right_join_keys)
  File "/home/rodrigo/real_options/venv/lib/python3.12/site-packages/pandas/core/reshape/merge.py", line 2125, in _maybe_require_matching_dtypes
    _check_dtype_match(lk, rk, i)
  File "/home/rodrigo/real_options/venv/lib/python3.12/site-packages/pandas/core/reshape/merge.py", line 2121, in _check_dtype_match
    raise MergeError(msg)
pandas.errors.MergeError: incompatible merge keys [0] dtype('<M8[ns]') and datetime64[ns, UTC], must be the same type
2026-01-19 19:06:01,970 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-01-19 19:06:01,972 - root - INFO - 'trade_ledger.csv' not found, no action taken.
2026-01-19 19:06:01,972 - Orchestrator - INFO - --- End-of-day analysis and archiving complete ---
2026-01-19 19:06:01,973 - Orchestrator - INFO - --- End-of-day reconciliation and analysis process complete ---
2026-01-19 19:06:01,973 - Orchestrator - INFO - Next task 'start_monitoring' scheduled for 2026-01-20 08:20:00 UTC. Waiting for 13.23 hours.
2026-01-19 19:06:52,017 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:06:52,018 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:07:22,033 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:07:22,034 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 19:08:22,093 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:08:22,094 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:08:52,124 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:08:52,124 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 19:09:52,160 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:09:52,161 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:10:22,190 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:10:22,190 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 19:11:22,250 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:11:22,251 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:11:52,254 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:11:52,256 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 19:12:52,301 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:12:52,303 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:13:22,322 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:13:22,323 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 19:14:22,373 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:14:22,376 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:14:52,403 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:14:52,403 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 19:15:52,463 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:15:52,468 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:16:22,483 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:16:22,484 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 19:17:22,530 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:17:22,532 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:17:52,561 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:17:52,562 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 19:18:52,605 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:18:52,607 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:19:22,610 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:19:22,611 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 19:20:22,664 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:20:22,667 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:20:52,692 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:20:52,693 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 19:21:52,750 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:21:52,753 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:22:22,778 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-01-19 19:22:22,779 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: 
2026-01-19 19:23:22,839 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:23:22,843 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:23:22,844 - ib_insync.client - ERROR - API connection failed: ConnectionRefusedError(111, "Connect call failed ('127.0.0.1', 7497)")
2026-01-19 19:23:22,845 - ib_insync.client - ERROR - Make sure API port on TWS/IBG is open
2026-01-19 19:23:22,845 - Orchestrator - ERROR - Sentinel IB Reconnect Failed: [Errno 111] Connect call failed ('127.0.0.1', 7497)
2026-01-19 19:24:22,905 - Orchestrator - WARNING - Sentinel IB connection lost. Attempting reconnect...
2026-01-19 19:24:22,905 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 101...
2026-01-19 19:24:23,467 - trading_bot.utils - INFO - ðŸ› ï¸ DEV MODE: Switching to Delayed Market Data (Type 3)
2026-01-19 19:24:23,468 - Orchestrator - INFO - Sentinel IB reconnected successfully.
2026-01-19 19:24:23,469 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-01-19 19:24:23,836 - root - INFO - Found 11 active tradeable contracts (>=45d exp). Returning the first 1.
2026-01-19 19:24:23,836 - Orchestrator - INFO - Refreshed contract cache: KCH6
2026-01-19 19:24:23,836 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:25:23,893 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:26:23,949 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:27:23,954 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:28:24,010 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:29:24,068 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:30:24,073 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:31:24,133 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:32:24,179 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:33:24,184 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:34:24,206 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:35:24,266 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:36:24,271 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:37:24,319 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:38:24,329 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:39:24,334 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:40:24,394 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:41:24,445 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:42:24,448 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:43:24,507 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:44:24,541 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:45:24,546 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:46:24,605 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:47:24,641 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:48:25,136 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:49:25,191 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:50:25,241 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:51:25,244 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:52:25,304 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:53:25,358 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:54:25,362 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:55:25,417 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:56:25,475 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:57:25,477 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:58:25,530 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 19:59:25,581 - trading_bot.sentinels - ERROR - Price Sentinel check failed: Not connected
2026-01-19 20:00:00,445 - ib_insync.client - ERROR - Peer closed connection.
