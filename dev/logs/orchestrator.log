2026-02-02 17:25:30,672 - Orchestrator - INFO - =============================================
2026-02-02 17:25:30,672 - Orchestrator - INFO - === Starting the Trading Bot Orchestrator ===
2026-02-02 17:25:30,672 - Orchestrator - INFO - =============================================
2026-02-02 17:25:30,673 - Orchestrator - INFO - Budget Guard initialized. Daily limit: $15.0
2026-02-02 17:25:30,918 - Orchestrator - INFO - --- Processing Deferred Triggers ---
2026-02-02 17:25:30,918 - Orchestrator - INFO - No deferred triggers to process.
2026-02-02 17:25:30,918 - Orchestrator - INFO - Environment: DEV. Applying -10 minute 'Civil War' avoidance offset.
2026-02-02 17:25:30,919 - Orchestrator - INFO - Next task 'close_stale_positions' scheduled for 2026-02-02 17:35:00 UTC. Waiting for 0.16 hours.
2026-02-02 17:25:30,919 - Orchestrator - INFO - --- Starting Sentinel Array ---
2026-02-02 17:25:30,919 - trading_bot.sentinels - INFO - WeatherSentinel: Loaded 3 active alerts from disk
2026-02-02 17:25:31,415 - trading_bot.sentinels - INFO - XSentimentSentinel initialized with model: grok-4-1-fast-reasoning
2026-02-02 17:25:31,418 - trading_bot.sentinels - INFO - Loaded state for 1 prediction market topics
2026-02-02 17:25:31,421 - trading_bot.sentinels - INFO - PredictionMarketSentinel v2.0 initialized: 4 topics | min_liq=$10,000 | HWM decay=24h
2026-02-02 17:25:31,426 - Orchestrator - INFO - Market Open: Establishing Sentinel IB connection...
2026-02-02 17:25:31,426 - trading_bot.connection_pool - INFO - Connecting IB (sentinel) ID: 114...
2026-02-02 17:25:32,013 - trading_bot.connection_pool - INFO - IB (sentinel) connected successfully with ID 114
2026-02-02 17:25:32,024 - trading_bot.utils - INFO - üõ†Ô∏è Configuring Market Data: Requesting LIVE (Type 1) Data.
2026-02-02 17:25:32,024 - Orchestrator - INFO - Sentinel IB connected and injected into PriceSentinel.
2026-02-02 17:25:32,024 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-02-02 17:25:32,228 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-02 17:25:32,229 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 1.
2026-02-02 17:25:32,230 - Orchestrator - INFO - Refreshed contract cache: KCK6
2026-02-02 17:25:32,230 - Orchestrator - INFO - Market Open: Engaging Microstructure Sentinel
2026-02-02 17:25:32,230 - trading_bot.connection_pool - INFO - Connecting IB (microstructure) ID: 207...
2026-02-02 17:25:32,407 - trading_bot.connection_pool - INFO - IB (microstructure) connected successfully with ID 207
2026-02-02 17:25:32,412 - trading_bot.utils - INFO - üõ†Ô∏è Configuring Market Data: Requesting LIVE (Type 1) Data.
2026-02-02 17:25:32,413 - trading_bot.microstructure_sentinel - INFO - MicrostructureSentinel initialized
2026-02-02 17:25:34,415 - trading_bot.microstructure_sentinel - INFO - Subscribed to microstructure for KCK6
2026-02-02 17:25:43,393 - trading_bot.rate_limiter - INFO - GlobalRateLimiter initialized: ['gemini', 'openai', 'anthropic', 'xai']
2026-02-02 17:26:02,754 - trading_bot.sentinels - WARNING - ‚ö†Ô∏è No relevant markets for 'US Recession Risk' (attempt 1).
2026-02-02 17:26:02,977 - trading_bot.sentinels - WARNING - ‚ö†Ô∏è No relevant markets for 'Fed Rate Path 2026' (attempt 1).
2026-02-02 17:26:02,982 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 17:31:04,386 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 17:35:00,005 - Orchestrator - INFO - --- Running scheduled task: close_stale_positions ---
2026-02-02 17:35:00,006 - OrderManager - INFO - --- Initiating position closing based on 2-day holding period ---
2026-02-02 17:35:00,012 - trading_bot.connection_pool - INFO - Connecting IB (order_manager) ID: 143...
2026-02-02 17:35:00,028 - ib_insync.wrapper - ERROR - Error 326, reqId -1: Unable to connect as the client id is already in use. Retry with a unique client id.
2026-02-02 17:35:00,529 - ib_insync.client - ERROR - Peer closed connection. clientId 143 already in use?
2026-02-02 17:35:15,020 - ib_insync.client - ERROR - API connection failed: TimeoutError()
2026-02-02 17:35:15,528 - trading_bot.connection_pool - ERROR - IB (order_manager) connection failed: . Next retry backoff: 10.0s
2026-02-02 17:35:15,538 - OrderManager - CRITICAL - A critical error occurred while closing positions: 
Traceback (most recent call last):
  File "/usr/lib/python3.12/asyncio/tasks.py", line 520, in wait_for
    return await fut
           ^^^^^^^^^
asyncio.exceptions.CancelledError

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/home/rodrigo/real_options/trading_bot/order_manager.py", line 1349, in close_stale_positions
    ib = await IBConnectionPool.get_connection("order_manager", config)
         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/rodrigo/real_options/trading_bot/connection_pool.py", line 133, in get_connection
    await ib.connectAsync(
  File "/home/rodrigo/real_options/venv/lib/python3.12/site-packages/ib_insync/ib.py", line 1748, in connectAsync
    await self.client.connectAsync(host, port, clientId, timeout)
  File "/home/rodrigo/real_options/venv/lib/python3.12/site-packages/ib_insync/client.py", line 217, in connectAsync
    await asyncio.wait_for(self.apiStart, timeout)
  File "/usr/lib/python3.12/asyncio/tasks.py", line 519, in wait_for
    async with timeouts.timeout(timeout):
  File "/usr/lib/python3.12/asyncio/timeouts.py", line 115, in __aexit__
    raise TimeoutError from exc_val
TimeoutError

2026-02-02 17:35:15,854 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-02 17:35:16,102 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-02 17:35:16,105 - Orchestrator - INFO - Next task 'run_position_audit_cycle' scheduled for 2026-02-02 17:50:00 UTC. Waiting for 0.25 hours.
2026-02-02 17:36:05,745 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 17:41:07,083 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 17:46:08,196 - trading_bot.sentinels - WARNING - ‚ö†Ô∏è No relevant markets for 'US Recession Risk' (attempt 5).
2026-02-02 17:46:08,696 - trading_bot.sentinels - WARNING - ‚ö†Ô∏è No relevant markets for 'Fed Rate Path 2026' (attempt 5).
2026-02-02 17:46:08,702 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 17:50:00,003 - Orchestrator - INFO - --- Running scheduled task: run_position_audit_cycle ---
2026-02-02 17:50:00,004 - Orchestrator - INFO - --- POSITION AUDIT CYCLE (Scheduled) ---
2026-02-02 17:50:00,005 - trading_bot.connection_pool - INFO - Connecting IB (audit) ID: 234...
2026-02-02 17:50:00,204 - trading_bot.connection_pool - INFO - IB (audit) connected successfully with ID 234
2026-02-02 17:50:00,209 - trading_bot.utils - INFO - üõ†Ô∏è Configuring Market Data: Requesting LIVE (Type 1) Data.
2026-02-02 17:50:00,278 - chromadb.telemetry.product.posthog - INFO - Anonymized telemetry enabled. See                     https://docs.trychroma.com/telemetry for more information.
2026-02-02 17:50:00,397 - trading_bot.tms - INFO - TMS initialized at ./data/tms
2026-02-02 17:50:00,553 - trading_bot.heterogeneous_router - INFO - ResponseCache initialized with env=DEV, multiplier=0.25
2026-02-02 17:50:00,553 - trading_bot.heterogeneous_router - INFO - HeterogeneousRouter initialized. Available: ['anthropic', 'xai', 'gemini', 'openai']
2026-02-02 17:50:00,553 - trading_bot.agents - INFO - Heterogeneous routing enabled. Diversity: {'available_providers': ['anthropic', 'xai', 'gemini', 'openai'], 'diversity_score': 1.0}
2026-02-02 17:50:00,558 - trading_bot.tms - INFO - TMS initialized at ./data/tms
2026-02-02 17:50:00,559 - trading_bot.agents - INFO - Loaded commodity profile: Coffee Arabica
2026-02-02 17:50:00,559 - trading_bot.observability - INFO - HallucinationDetector initialized for Coffee Arabica: 9 port tokens, 24 producer tokens
2026-02-02 17:50:00,559 - trading_bot.observability - INFO - ObservabilityHub initialized for Coffee Arabica
2026-02-02 17:50:00,559 - trading_bot.agents - INFO - Observability Hub initialized.
2026-02-02 17:50:00,559 - trading_bot.agents - INFO - Trading Council initialized for Coffee Arabica. Agents: gemini-3-pro-preview, Master: gemini-3-pro-preview
2026-02-02 17:50:00,575 - Orchestrator - WARNING - No open position found for KOK6 P3.15, using most recent
2026-02-02 17:50:00,616 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-02-02 17:50:00,687 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-02 17:50:00,687 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 1.
2026-02-02 17:50:02,692 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-02-02 17:50:02,854 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-02 17:50:02,855 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 1.
2026-02-02 17:50:03,856 - Orchestrator - WARNING - THESIS INVALIDATED: e8fcdc8a-6507-4b60-a3dc-37b22843036b - PRICE BREACH: Underlying moved 1980.42% from entry (threshold: 2%). Entry: $15.17, Current: $315.60
2026-02-02 17:50:03,860 - Orchestrator - WARNING - No open position found for KOK6 P3.075, using most recent
2026-02-02 17:50:03,862 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-02-02 17:50:03,862 - ib_insync.wrapper - ERROR - Error 300, reqId 7: Can't find EId with tickerId:7
2026-02-02 17:50:03,959 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-02 17:50:03,960 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 1.
2026-02-02 17:50:07,164 - Orchestrator - WARNING - No open position found for KOK6 C3.225, using most recent
2026-02-02 17:50:07,166 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-02-02 17:50:07,166 - ib_insync.wrapper - ERROR - Error 300, reqId 12: Can't find EId with tickerId:12
2026-02-02 17:50:07,263 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-02 17:50:07,263 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 1.
2026-02-02 17:50:10,426 - Orchestrator - WARNING - No open position found for KOK6 C3.275, using most recent
2026-02-02 17:50:10,429 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-02-02 17:50:10,429 - ib_insync.wrapper - ERROR - Error 300, reqId 17: Can't find EId with tickerId:17
2026-02-02 17:50:10,527 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-02 17:50:10,527 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 1.
2026-02-02 17:50:13,695 - Orchestrator - WARNING - No open position found for KOK6 P3.125, using most recent
2026-02-02 17:50:13,699 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-02-02 17:50:13,700 - ib_insync.wrapper - ERROR - Error 300, reqId 22: Can't find EId with tickerId:22
2026-02-02 17:50:13,796 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-02 17:50:13,796 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 1.
2026-02-02 17:50:17,002 - Orchestrator - WARNING - No open position found for KOK6 C3.3, using most recent
2026-02-02 17:50:17,006 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-02-02 17:50:17,007 - ib_insync.wrapper - ERROR - Error 300, reqId 27: Can't find EId with tickerId:27
2026-02-02 17:50:17,104 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-02 17:50:17,105 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 1.
2026-02-02 17:50:19,154 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-02-02 17:50:19,314 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-02 17:50:19,314 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 1.
2026-02-02 17:50:20,317 - Orchestrator - WARNING - THESIS INVALIDATED: e8fcdc8a-6507-4b60-a3dc-37b22843036b - PRICE BREACH: Underlying moved 1980.09% from entry (threshold: 2%). Entry: $15.17, Current: $315.55
2026-02-02 17:50:20,319 - Orchestrator - WARNING - No open position found for KOK6 C3.35, using most recent
2026-02-02 17:50:20,322 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-02-02 17:50:20,322 - ib_insync.wrapper - ERROR - Error 300, reqId 32: Can't find EId with tickerId:32
2026-02-02 17:50:20,421 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-02 17:50:20,421 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 1.
2026-02-02 17:50:22,426 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-02-02 17:50:22,588 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-02 17:50:22,589 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 1.
2026-02-02 17:50:23,593 - Orchestrator - WARNING - THESIS INVALIDATED: e8fcdc8a-6507-4b60-a3dc-37b22843036b - PRICE BREACH: Underlying moved 1980.09% from entry (threshold: 2%). Entry: $15.17, Current: $315.55
2026-02-02 17:50:23,598 - Orchestrator - WARNING - No open position found for KOK6 P3.2, using most recent
2026-02-02 17:50:23,600 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-02-02 17:50:23,602 - ib_insync.wrapper - ERROR - Error 300, reqId 37: Can't find EId with tickerId:37
2026-02-02 17:50:23,696 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-02 17:50:23,697 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 1.
2026-02-02 17:50:25,703 - root - INFO - Fetching 1 active futures contracts for KC on NYBOT...
2026-02-02 17:50:25,861 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-02 17:50:25,861 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 1.
2026-02-02 17:50:26,864 - Orchestrator - WARNING - THESIS INVALIDATED: e8fcdc8a-6507-4b60-a3dc-37b22843036b - PRICE BREACH: Underlying moved 1980.09% from entry (threshold: 2%). Entry: $15.17, Current: $315.55
2026-02-02 17:50:26,864 - Orchestrator - INFO - Executing THESIS CLOSE for e8fcdc8a-6507-4b60-a3dc-37b22843036b: PRICE BREACH: Underlying moved 1980.42% from entry (threshold: 2%). Entry: $15.17, Current: $315.60
2026-02-02 17:50:26,865 - root - INFO - Assigned new unique OrderRef for tracking: 1bb01988-b5ae-41c8-9383-a1a47fb24331
2026-02-02 17:50:26,865 - root - INFO - Placing BUY order for KOK6 P3.15...
2026-02-02 17:50:26,865 - root - INFO - Successfully placed order ID 43 for KOK6 P3.15.
2026-02-02 17:50:26,868 - ib_insync.wrapper - ERROR - Error 300, reqId 42: Can't find EId with tickerId:42
2026-02-02 17:50:26,966 - ib_insync.wrapper - ERROR - Error 321, reqId 43: Error validating request.-'bH' : cause - Missing order exchange.
2026-02-02 17:50:26,967 - ib_insync.wrapper - WARNING - Canceled order: Trade(contract=FuturesOption(conId=743955683, symbol='KC', lastTradeDateOrContractMonth='20260410', strike=3.15, right='P', multiplier='37500', currency='USD', localSymbol='KOK6 P3.15', tradingClass='KO'), order=MarketOrder(orderId=43, clientId=234, action='BUY', totalQuantity=1.0, orderRef='1bb01988-b5ae-41c8-9383-a1a47fb24331'), orderStatus=OrderStatus(orderId=43, status='Cancelled', filled=0.0, remaining=0.0, avgFillPrice=0.0, permId=0, parentId=0, lastFillPrice=0.0, clientId=0, whyHeld='', mktCapPrice=0.0), fills=[], log=[TradeLogEntry(time=datetime.datetime(2026, 2, 2, 17, 50, 26, 865531, tzinfo=datetime.timezone.utc), status='PendingSubmit', message='', errorCode=0), TradeLogEntry(time=datetime.datetime(2026, 2, 2, 17, 50, 26, 966835, tzinfo=datetime.timezone.utc), status='Cancelled', message="Error 321, reqId 43: Error validating request.-'bH' : cause - Missing order exchange.", errorCode=321)], advancedError='')
2026-02-02 17:50:29,180 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-02 17:50:29,226 - trading_bot.tms - INFO - TMS: Invalidated thesis for e8fcdc8a-6507-4b60-a3dc-37b22843036b: PRICE BREACH: Underlying moved 1980.42% from entry (threshold: 2%). Entry: $15.17, Current: $315.60
2026-02-02 17:50:29,226 - Orchestrator - INFO - Executing THESIS CLOSE for e8fcdc8a-6507-4b60-a3dc-37b22843036b: PRICE BREACH: Underlying moved 1980.09% from entry (threshold: 2%). Entry: $15.17, Current: $315.55
2026-02-02 17:50:29,226 - root - INFO - Assigned new unique OrderRef for tracking: fb075d3c-6ab3-40fe-8508-2dae6fe9e5f0
2026-02-02 17:50:29,226 - root - INFO - Placing SELL order for KOK6 C3.3...
2026-02-02 17:50:29,227 - root - INFO - Successfully placed order ID 92 for KOK6 C3.3.
2026-02-02 17:50:29,229 - ib_insync.wrapper - ERROR - Error 321, reqId 92: Error validating request.-'bH' : cause - Missing order exchange.
2026-02-02 17:50:29,229 - ib_insync.wrapper - WARNING - Canceled order: Trade(contract=FuturesOption(conId=732415567, symbol='KC', lastTradeDateOrContractMonth='20260410', strike=3.3, right='C', multiplier='37500', currency='USD', localSymbol='KOK6 C3.3', tradingClass='KO'), order=MarketOrder(orderId=92, clientId=234, action='SELL', totalQuantity=1.0, orderRef='fb075d3c-6ab3-40fe-8508-2dae6fe9e5f0'), orderStatus=OrderStatus(orderId=92, status='Cancelled', filled=0.0, remaining=0.0, avgFillPrice=0.0, permId=0, parentId=0, lastFillPrice=0.0, clientId=0, whyHeld='', mktCapPrice=0.0), fills=[], log=[TradeLogEntry(time=datetime.datetime(2026, 2, 2, 17, 50, 29, 226971, tzinfo=datetime.timezone.utc), status='PendingSubmit', message='', errorCode=0), TradeLogEntry(time=datetime.datetime(2026, 2, 2, 17, 50, 29, 229565, tzinfo=datetime.timezone.utc), status='Cancelled', message="Error 321, reqId 92: Error validating request.-'bH' : cause - Missing order exchange.", errorCode=321)], advancedError='')
2026-02-02 17:50:31,518 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-02 17:50:31,566 - trading_bot.tms - INFO - TMS: Invalidated thesis for e8fcdc8a-6507-4b60-a3dc-37b22843036b: PRICE BREACH: Underlying moved 1980.09% from entry (threshold: 2%). Entry: $15.17, Current: $315.55
2026-02-02 17:50:31,566 - Orchestrator - INFO - Executing THESIS CLOSE for e8fcdc8a-6507-4b60-a3dc-37b22843036b: PRICE BREACH: Underlying moved 1980.09% from entry (threshold: 2%). Entry: $15.17, Current: $315.55
2026-02-02 17:50:31,566 - root - INFO - Assigned new unique OrderRef for tracking: a9099d6b-c66a-4d49-b78e-beb4b75b4656
2026-02-02 17:50:31,566 - root - INFO - Placing BUY order for KOK6 C3.35...
2026-02-02 17:50:31,567 - root - INFO - Successfully placed order ID 93 for KOK6 C3.35.
2026-02-02 17:50:31,569 - ib_insync.wrapper - ERROR - Error 321, reqId 93: Error validating request.-'bH' : cause - Missing order exchange.
2026-02-02 17:50:31,570 - ib_insync.wrapper - WARNING - Canceled order: Trade(contract=FuturesOption(conId=745575714, symbol='KC', lastTradeDateOrContractMonth='20260410', strike=3.35, right='C', multiplier='37500', currency='USD', localSymbol='KOK6 C3.35', tradingClass='KO'), order=MarketOrder(orderId=93, clientId=234, action='BUY', totalQuantity=1.0, orderRef='a9099d6b-c66a-4d49-b78e-beb4b75b4656'), orderStatus=OrderStatus(orderId=93, status='Cancelled', filled=0.0, remaining=0.0, avgFillPrice=0.0, permId=0, parentId=0, lastFillPrice=0.0, clientId=0, whyHeld='', mktCapPrice=0.0), fills=[], log=[TradeLogEntry(time=datetime.datetime(2026, 2, 2, 17, 50, 31, 566920, tzinfo=datetime.timezone.utc), status='PendingSubmit', message='', errorCode=0), TradeLogEntry(time=datetime.datetime(2026, 2, 2, 17, 50, 31, 569716, tzinfo=datetime.timezone.utc), status='Cancelled', message="Error 321, reqId 93: Error validating request.-'bH' : cause - Missing order exchange.", errorCode=321)], advancedError='')
2026-02-02 17:50:33,812 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-02 17:50:33,853 - trading_bot.tms - INFO - TMS: Invalidated thesis for e8fcdc8a-6507-4b60-a3dc-37b22843036b: PRICE BREACH: Underlying moved 1980.09% from entry (threshold: 2%). Entry: $15.17, Current: $315.55
2026-02-02 17:50:33,853 - Orchestrator - INFO - Executing THESIS CLOSE for e8fcdc8a-6507-4b60-a3dc-37b22843036b: PRICE BREACH: Underlying moved 1980.09% from entry (threshold: 2%). Entry: $15.17, Current: $315.55
2026-02-02 17:50:33,854 - root - INFO - Assigned new unique OrderRef for tracking: aebfda62-a698-444a-b420-142d6ef52252
2026-02-02 17:50:33,854 - root - INFO - Placing SELL order for KOK6 P3.2...
2026-02-02 17:50:33,854 - root - INFO - Successfully placed order ID 94 for KOK6 P3.2.
2026-02-02 17:50:33,857 - ib_insync.wrapper - ERROR - Error 321, reqId 94: Error validating request.-'bH' : cause - Missing order exchange.
2026-02-02 17:50:33,857 - ib_insync.wrapper - WARNING - Canceled order: Trade(contract=FuturesOption(conId=725781080, symbol='KC', lastTradeDateOrContractMonth='20260410', strike=3.2, right='P', multiplier='37500', currency='USD', localSymbol='KOK6 P3.2', tradingClass='KO'), order=MarketOrder(orderId=94, clientId=234, action='SELL', totalQuantity=1.0, orderRef='aebfda62-a698-444a-b420-142d6ef52252'), orderStatus=OrderStatus(orderId=94, status='Cancelled', filled=0.0, remaining=0.0, avgFillPrice=0.0, permId=0, parentId=0, lastFillPrice=0.0, clientId=0, whyHeld='', mktCapPrice=0.0), fills=[], log=[TradeLogEntry(time=datetime.datetime(2026, 2, 2, 17, 50, 33, 854500, tzinfo=datetime.timezone.utc), status='PendingSubmit', message='', errorCode=0), TradeLogEntry(time=datetime.datetime(2026, 2, 2, 17, 50, 33, 857120, tzinfo=datetime.timezone.utc), status='Cancelled', message="Error 321, reqId 94: Error validating request.-'bH' : cause - Missing order exchange.", errorCode=321)], advancedError='')
2026-02-02 17:50:36,073 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-02 17:50:36,107 - trading_bot.tms - INFO - TMS: Invalidated thesis for e8fcdc8a-6507-4b60-a3dc-37b22843036b: PRICE BREACH: Underlying moved 1980.09% from entry (threshold: 2%). Entry: $15.17, Current: $315.55
2026-02-02 17:50:36,323 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-02 17:50:36,325 - Orchestrator - INFO - Next task 'cancel_and_stop_monitoring' scheduled for 2026-02-02 18:35:00 UTC. Waiting for 0.74 hours.
2026-02-02 17:51:09,778 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 17:56:11,147 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 18:01:12,461 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 18:06:13,493 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 18:11:14,836 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 18:11:14,837 - Orchestrator - WARNING - MICROSTRUCTURE ALERT: Liquidity Depletion: 25% of average
2026-02-02 18:11:15,148 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-02 18:16:16,914 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 18:21:18,208 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 18:24:18,572 - Orchestrator - INFO - MICROSTRUCTURE NOTE: Liquidity Depletion: 38% of average (Sev: 6)
2026-02-02 18:24:18,578 - trading_bot.state_manager - INFO - Logged sentinel event from MicrostructureSentinel to history.
2026-02-02 18:26:19,312 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 18:31:20,404 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 18:35:00,038 - Orchestrator - INFO - --- Running scheduled task: cancel_and_stop_monitoring ---
2026-02-02 18:35:00,040 - Orchestrator - INFO - --- Initiating end-of-day shutdown sequence ---
2026-02-02 18:35:00,040 - OrderManager - INFO - --- Canceling any remaining open DAY orders ---
2026-02-02 18:35:00,040 - trading_bot.connection_pool - INFO - Connecting IB (order_manager) ID: 149...
2026-02-02 18:35:00,599 - trading_bot.connection_pool - INFO - IB (order_manager) connected successfully with ID 149
2026-02-02 18:35:00,605 - trading_bot.utils - INFO - üõ†Ô∏è Configuring Market Data: Requesting LIVE (Type 1) Data.
2026-02-02 18:35:00,606 - OrderManager - INFO - Connected to IB for canceling open orders.
2026-02-02 18:35:00,608 - OrderManager - INFO - No open orders found to cancel.
2026-02-02 18:35:00,608 - Orchestrator - WARNING - Monitoring process is not running or has already terminated.
2026-02-02 18:35:00,608 - Orchestrator - INFO - --- End-of-day shutdown sequence complete ---
2026-02-02 18:35:00,609 - Orchestrator - INFO - Next task 'log_equity_snapshot' scheduled for 2026-02-02 18:55:00 UTC. Waiting for 0.33 hours.
2026-02-02 18:36:21,695 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 18:41:23,145 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 18:46:24,391 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 18:51:26,152 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 18:55:00,016 - Orchestrator - INFO - --- Running scheduled task: log_equity_snapshot ---
2026-02-02 18:55:00,018 - EquityLogger - INFO - --- Starting Equity Snapshot Logging ---
2026-02-02 18:55:00,019 - EquityLogger - INFO - Connecting to IB at 127.0.0.1:7497 with clientId 3392...
2026-02-02 18:55:00,373 - trading_bot.utils - INFO - üõ†Ô∏è Configuring Market Data: Requesting LIVE (Type 1) Data.
2026-02-02 18:55:00,568 - EquityLogger - INFO - Fetched NetLiquidation: $46,982.35
2026-02-02 18:55:00,579 - EquityLogger - INFO - Updated data/daily_equity.csv with value $46,982.35
2026-02-02 18:55:03,583 - EquityLogger - INFO - Disconnected from IB.
2026-02-02 18:55:03,584 - Orchestrator - INFO - Next task 'reconcile_and_analyze' scheduled for 2026-02-02 19:05:00 UTC. Waiting for 0.17 hours.
2026-02-02 18:56:46,148 - trading_bot.sentinels - WARNING - X volume spike: 19 vs mean 4 (>3.0x)
2026-02-02 18:56:46,149 - trading_bot.sentinels - INFO - X volume anomaly: z-score=5.0
2026-02-02 18:56:46,149 - trading_bot.sentinels - WARNING - üö® X SENTINEL TRIGGERED: UNUSUAL X ACTIVITY SPIKE (19 posts, 3.0x baseline)
2026-02-02 18:56:46,158 - trading_bot.state_manager - INFO - Logged sentinel event from XSentimentSentinel to history.
2026-02-02 18:56:46,158 - Orchestrator - INFO - üö® EMERGENCY CYCLE TRIGGERED by XSentimentSentinel: UNUSUAL X ACTIVITY SPIKE (19 posts, 3.0x baseline) (Cycle: KC-8a0ef729)
2026-02-02 18:56:46,477 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-02 18:56:46,484 - trading_bot.tms - INFO - TMS initialized at ./data/tms
2026-02-02 18:56:46,577 - trading_bot.heterogeneous_router - INFO - ResponseCache initialized with env=DEV, multiplier=0.25
2026-02-02 18:56:46,578 - trading_bot.heterogeneous_router - INFO - HeterogeneousRouter initialized. Available: ['anthropic', 'xai', 'gemini', 'openai']
2026-02-02 18:56:46,578 - trading_bot.agents - INFO - Heterogeneous routing enabled. Diversity: {'available_providers': ['anthropic', 'xai', 'gemini', 'openai'], 'diversity_score': 1.0}
2026-02-02 18:56:46,582 - trading_bot.tms - INFO - TMS initialized at ./data/tms
2026-02-02 18:56:46,582 - trading_bot.agents - INFO - Loaded commodity profile: Coffee Arabica
2026-02-02 18:56:46,582 - trading_bot.observability - INFO - HallucinationDetector initialized for Coffee Arabica: 9 port tokens, 24 producer tokens
2026-02-02 18:56:46,582 - trading_bot.observability - INFO - ObservabilityHub initialized for Coffee Arabica
2026-02-02 18:56:46,582 - trading_bot.agents - INFO - Observability Hub initialized.
2026-02-02 18:56:46,582 - trading_bot.agents - INFO - Trading Council initialized for Coffee Arabica. Agents: gemini-3-pro-preview, Master: gemini-3-pro-preview
2026-02-02 18:56:46,582 - root - INFO - Fetching 2 active futures contracts for KC on NYBOT...
2026-02-02 18:56:46,651 - root - INFO - Skipping contract KCH6 (Exp: 20260319): Expires < 45 days.
2026-02-02 18:56:46,651 - root - INFO - Found 10 active tradeable contracts (>=45d exp). Returning the first 2.
2026-02-02 18:56:46,651 - Orchestrator - INFO - Targeting contract: KCK6 (202605)
2026-02-02 18:56:47,014 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 18:56:50,770 - trading_bot.market_data_provider - INFO - Building market context for KCK6 (202605)...
2026-02-02 18:56:51,165 - trading_bot.market_data_provider - INFO - Market context for KCK6 (202605): price=317.15, sma_200=335.8915, regime=TRENDING, vol_5d=0.0279
2026-02-02 18:56:51,166 - Orchestrator - INFO - Emergency market context: price=317.15, regime=TRENDING
2026-02-02 18:56:51,166 - trading_bot.agents - INFO - Running Specialized Cycle triggered by XSentimentSentinel...
2026-02-02 18:56:51,166 - trading_bot.agents - INFO - Routing to macro (Reason: Default routing)
2026-02-02 18:56:51,167 - trading_bot.agents - INFO - Waking up macro...
2026-02-02 18:56:51,544 - trading_bot.agents - INFO - Retrieved 3 TMS insights for macro.
2026-02-02 18:56:51,545 - trading_bot.agents - INFO - [macro] Phase 1: Gathering grounded data...
2026-02-02 18:58:07,716 - trading_bot.weighted_voting - INFO - Market Regime Detected: TRENDING
2026-02-02 18:58:07,717 - trading_bot.weighted_voting - WARNING - Agent agronomist: ABSTAINING due to stale/failed data (would dilute signal)
2026-02-02 18:58:07,718 - trading_bot.weighted_voting - WARNING - Agent geopolitical: ABSTAINING due to stale/failed data (would dilute signal)
2026-02-02 18:58:07,718 - trading_bot.weighted_voting - WARNING - Agent supply_chain: ABSTAINING due to stale/failed data (would dilute signal)
2026-02-02 18:58:07,718 - trading_bot.weighted_voting - WARNING - Agent inventory: ABSTAINING due to stale/failed data (would dilute signal)
2026-02-02 18:58:07,718 - trading_bot.weighted_voting - WARNING - Agent sentiment: ABSTAINING due to stale/failed data (would dilute signal)
2026-02-02 18:58:07,718 - trading_bot.weighted_voting - WARNING - Agent technical: ABSTAINING due to stale/failed data (would dilute signal)
2026-02-02 18:58:07,718 - trading_bot.weighted_voting - WARNING - Agent volatility: ABSTAINING due to stale/failed data (would dilute signal)
2026-02-02 18:58:07,718 - trading_bot.weighted_voting - WARNING - Agent latest_ml_signals: ABSTAINING due to stale/failed data (would dilute signal)
2026-02-02 18:58:07,718 - trading_bot.weighted_voting - WARNING - QUORUM FAILURE: Only 1 agents voted (minimum: 3). Returning NEUTRAL to prevent low-confidence decisions.
2026-02-02 18:58:07,718 - trading_bot.agents - WARNING - Quorum failure for KCK6 (202605): Only ['macro'] voted. Skipping council for this contract.
2026-02-02 18:58:07,718 - Orchestrator - INFO - Emergency Decision: NEUTRAL (0.0)
2026-02-02 18:58:07,728 - root - INFO - Logged council decision for KCK6 (202605)
2026-02-02 18:58:07,732 - trading_bot.decision_signals - INFO - Decision signal logged: KCK6 (202605) ‚Üí NEUTRAL (DIRECTIONAL/EMERGENCY)
2026-02-02 18:58:07,750 - trading_bot.brier_scoring - INFO - Loaded time-weighted Brier scores for 9 agents: {agronomist: 0.19, geopolitical: 0.16, inventory: 0.00, macro: 0.41, master_decision: 0.06, sentiment: 0.00, supply_chain: 0.04, technical: 0.09, volatility: 0.14}
2026-02-02 18:58:07,772 - Orchestrator - INFO - Emergency Cycle concluded with no action: NEUTRAL (DIRECTIONAL)
2026-02-02 18:58:07,772 - Orchestrator - INFO - Post-cycle debounce set for 1800s
2026-02-02 19:00:47,540 - Orchestrator - INFO - Market Closed: Disconnecting Sentinel IB to prevent zombie state.
2026-02-02 19:00:50,543 - Orchestrator - INFO - Market Closed: Disengaging Microstructure Sentinel
2026-02-02 19:00:50,544 - trading_bot.connection_pool - INFO - Disconnecting IB (microstructure)...
2026-02-02 19:01:54,046 - trading_bot.sentinels - INFO - PredictionMarket: 1 tracking, 3 unresolved | Active: FedRate
2026-02-02 19:05:00,007 - Orchestrator - INFO - --- Running scheduled task: reconcile_and_analyze ---
2026-02-02 19:05:00,008 - Orchestrator - INFO - --- Kicking off end-of-day reconciliation and analysis process ---
2026-02-02 19:05:00,009 - EquityLogger - INFO - --- Starting Equity Synchronization from Flex Query ---
2026-02-02 19:05:00,053 - TradeReconciler - INFO - Requesting Flex Query report (Query ID: 1341111)...
2026-02-02 19:05:00,321 - TradeReconciler - INFO - Successfully requested report. Reference Code: 8155108932
2026-02-02 19:05:10,324 - TradeReconciler - INFO - Polling for report (Attempt 1/10)...
2026-02-02 19:05:10,460 - TradeReconciler - INFO - Successfully downloaded Flex Query report.
2026-02-02 19:05:10,468 - EquityLogger - INFO - Preserving 3 local equity records not present in Flex Query.
2026-02-02 19:05:10,470 - EquityLogger - INFO - Successfully synced 12 equity records to data/daily_equity.csv.
2026-02-02 19:05:10,471 - Orchestrator - INFO - --- Starting trade reconciliation ---
2026-02-02 19:05:10,471 - TradeReconciler - INFO - Starting trade reconciliation using Flex Queries.
2026-02-02 19:05:10,473 - TradeReconciler - INFO - Fetching report for Query ID: 1328326
2026-02-02 19:05:10,503 - TradeReconciler - INFO - Requesting Flex Query report (Query ID: 1328326)...
2026-02-02 19:05:10,662 - TradeReconciler - INFO - Successfully requested report. Reference Code: 1225106476
2026-02-02 19:05:20,672 - TradeReconciler - INFO - Polling for report (Attempt 1/10)...
2026-02-02 19:05:20,823 - TradeReconciler - INFO - Successfully downloaded Flex Query report.
2026-02-02 19:05:20,826 - TradeReconciler - INFO - Parsed 32 executions from the Flex Query report.
2026-02-02 19:05:20,843 - TradeReconciler - INFO - Successfully processed 32 trades into the reconciliation DataFrame.
2026-02-02 19:05:20,843 - TradeReconciler - INFO - Fetching report for Query ID: 1331422
2026-02-02 19:05:20,872 - TradeReconciler - INFO - Requesting Flex Query report (Query ID: 1331422)...
2026-02-02 19:05:21,183 - TradeReconciler - INFO - Successfully requested report. Reference Code: 2048255756
2026-02-02 19:05:31,189 - TradeReconciler - INFO - Polling for report (Attempt 1/10)...
2026-02-02 19:05:31,394 - TradeReconciler - INFO - Successfully downloaded Flex Query report.
2026-02-02 19:05:31,396 - TradeReconciler - INFO - Parsed 4 executions from the Flex Query report.
2026-02-02 19:05:31,410 - TradeReconciler - INFO - Successfully processed 4 trades into the reconciliation DataFrame.
2026-02-02 19:05:31,412 - TradeReconciler - INFO - Consolidated to 36 unique trades from all reports.
2026-02-02 19:05:31,414 - TradeReconciler - INFO - Loaded 4 trades from the main ledger.
2026-02-02 19:05:31,414 - TradeReconciler - INFO - Found 2 archived ledger files.
2026-02-02 19:05:31,419 - TradeReconciler - INFO - Consolidated a total of 36 trades from all ledgers.
2026-02-02 19:05:31,420 - TradeReconciler - INFO - Filtered IB trades from 36 to 36 records within the last 33 days.
2026-02-02 19:05:31,421 - TradeReconciler - INFO - Filtered local ledger from 36 to 36 records within the last 33 days.
2026-02-02 19:05:31,481 - TradeReconciler - INFO - Reconciliation complete. Found 0 trade(s) missing from local ledger. Found 0 superfluous trade(s) in local ledger.
2026-02-02 19:05:31,481 - TradeReconciler - INFO - No discrepancies found. The local ledger is perfectly in sync with the IB report.
2026-02-02 19:05:31,482 - Orchestrator - INFO - Trade reconciliation complete. No discrepancies found.
2026-02-02 19:05:31,482 - TradeReconciler - INFO - Starting Active Position Reconciliation...
2026-02-02 19:05:31,511 - TradeReconciler - INFO - Requesting Flex Query report (Query ID: 1341164)...
2026-02-02 19:05:31,702 - TradeReconciler - INFO - Successfully requested report. Reference Code: 9131951514
2026-02-02 19:05:41,710 - TradeReconciler - INFO - Polling for report (Attempt 1/10)...
2026-02-02 19:05:41,896 - TradeReconciler - INFO - Successfully downloaded Flex Query report.
2026-02-02 19:05:41,898 - TradeReconciler - INFO - Parsed 4 positions from the Flex Query report.
2026-02-02 19:05:41,900 - TradeReconciler - INFO - Loaded 4 trades from the main ledger.
2026-02-02 19:05:41,901 - TradeReconciler - INFO - Found 2 archived ledger files.
2026-02-02 19:05:41,905 - TradeReconciler - INFO - Consolidated a total of 36 trades from all ledgers.
2026-02-02 19:05:41,909 - TradeReconciler - INFO - Skipping reconciliation for recently traded symbols: {'KOK6 C3.275', 'KOK6 C3.225', 'KOK6 P3.075', 'KOK6 P3.125'}
2026-02-02 19:05:41,913 - TradeReconciler - INFO - Active Position Reconciliation complete. No discrepancies found.
2026-02-02 19:05:41,913 - trading_bot.reconciliation - INFO - --- Starting Council History Reconciliation ---
2026-02-02 19:05:42,489 - trading_bot.reconciliation - ERROR - Error during reconciliation process: cannot access local variable 'pd' where it is not associated with a value
2026-02-02 19:05:45,493 - Orchestrator - INFO - --- Initiating end-of-day analysis and archiving ---
2026-02-02 19:05:45,493 - PerformanceAnalyzer - INFO - --- Consolidating Trade Ledgers ---
2026-02-02 19:05:45,493 - PerformanceAnalyzer - INFO - Loading main trade ledger: trade_ledger.csv
2026-02-02 19:05:45,496 - PerformanceAnalyzer - INFO - Found 2 archived trade ledger(s).
2026-02-02 19:05:45,496 - PerformanceAnalyzer - INFO - Loading archived ledger: trade_ledger_20260129_190559.csv
2026-02-02 19:05:45,498 - PerformanceAnalyzer - INFO - Loading archived ledger: trade_ledger_20260130_190602.csv
2026-02-02 19:05:45,501 - PerformanceAnalyzer - INFO - Consolidated a total of 36 trade records.
2026-02-02 19:05:45,504 - PerformanceAnalyzer - INFO - --- Starting Daily Performance Analysis ---
2026-02-02 19:05:45,956 - PerformanceAnalyzer - INFO - Fetched Net Liquidation Value: $46,982.35
2026-02-02 19:05:47,962 - PerformanceAnalyzer - INFO - Successfully fetched 5 execution(s) for today from IB.
2026-02-02 19:05:50,966 - PerformanceAnalyzer - INFO - Loading daily_equity.csv for equity curve.
2026-02-02 19:05:50,970 - PerformanceAnalyzer - INFO - Dynamic Starting Capital from History: $50,000.00
2026-02-02 19:05:50,973 - PerformanceAnalyzer - INFO - Calculated LTD Total P&L (Equity): $-3,017.65
2026-02-02 19:05:51,610 - PerformanceAnalyzer - INFO - --- Analysis Complete ---
2026-02-02 19:05:52,579 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-02 19:05:52,781 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-02 19:05:53,971 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-02 19:05:55,164 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-02 19:05:56,349 - notifications - INFO - Pushover chunk sent successfully (Attachment: False).
2026-02-02 19:05:57,545 - notifications - INFO - Pushover chunk sent successfully (Attachment: True).
2026-02-02 19:05:59,000 - notifications - INFO - Pushover chunk sent successfully (Attachment: True).
2026-02-02 19:06:00,197 - notifications - INFO - Pushover chunk sent successfully (Attachment: True).
2026-02-02 19:06:01,201 - root - INFO - Successfully archived 'trade_ledger.csv' to '/home/rodrigo/real_options/archive_ledger/trade_ledger_20260202_190601.csv'
2026-02-02 19:06:01,201 - Orchestrator - INFO - --- End-of-day analysis and archiving complete ---
2026-02-02 19:06:01,207 - Orchestrator - ERROR - Feedback loop health check failed: time data "KC-c0f3b12c" doesn't match format "%Y-%m-%d %H:%M:%S.%f%z", at position 457. You might want to try:
    - passing `format` if your strings have a consistent format;
    - passing `format='ISO8601'` if your strings are all ISO8601 but not necessarily in exactly the same format;
    - passing `format='mixed'`, and the format will be inferred for each element individually. You might want to use `dayfirst` alongside this.
2026-02-02 19:06:01,207 - Orchestrator - INFO - --- End-of-day reconciliation and analysis process complete ---
2026-02-02 19:06:01,207 - Orchestrator - INFO - Next task 'start_monitoring' scheduled for 2026-02-03 08:20:00 UTC. Waiting for 13.23 hours.
