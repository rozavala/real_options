{
  "connection": {
    "host": "127.0.0.1",
    "port": 7497,
    "clientId": 55
  },
  "flex_query": {
    "token": "LOADED_FROM_ENV",
    "query_ids": ["LOADED_FROM_ENV"],
    "active_positions_query_id": "LOADED_FROM_ENV"
  },
  "symbol": "KC",
  "exchange": "NYBOT",
  "strategy": {
    "quantity": 1,
    "signal_threshold": 0.005
  },
  "strategy_tuning": {
    "spread_width_percentage": 0.5,
    "adaptive_step_interval_seconds": 60,
    "adaptive_step_percentage": 0.01,
    "iron_condor_short_strikes_from_atm": 2,
    "iron_condor_wing_strikes_apart": 2,
    "slippage_spread_percentage": 0.5,
    "order_type": "LMT",
    "max_liquidity_spread_percentage": 0.25,
    "fixed_slippage_cents": 0.5
  },
  "risk_management": {
    "max_holding_days": 2,
    "check_interval_seconds": 600,
    "min_confidence_threshold": 0.70,
    "monitoring_grace_period_seconds": 300,
    "take_profit_capture_pct": 0.80,
    "stop_loss_max_risk_pct": 0.50
  },
  "notifications": {
    "enabled": true,
    "pushover_user_key": "gzt6h4nbn2cux2ohm1e5qq4ka7y497",
    "pushover_api_token": "amoefo7ocngkn2vprnqiov2e19bm7o"
  },
  "fred_api_key": "1f8f53f43170a81a69c72fe49a1f1fc3",
  "nasdaq_api_key": "TXZJiisWnW1iJe8Vrjti",
  "weather_stations": {
    "brazil_minas_gerais": [
      "-19.9245",
      "-43.9353"
    ],
    "vietnam_ho_chi_minh": [
      "10.8231",
      "106.6297"
    ],
    "colombia_antioquia": [
      "6.2442",
      "-75.5812"
    ],
    "indonesia_sumatra": [
      "3.5952",
      "98.6722"
    ]
  },
  "fred_series": {
    "brl_usd_exchange_rate": "DEXBZUS",
    "oil_price_wti": "DCOILWTICO",
    "indonesia_idr_usd": "DEXINUS",
    "mexico_mxn_usd": "DEXMXUS",
    "dgs10_yield": "DGS10"
  },
  "yf_series_map": {
    "SB=F": "sugar_price",
    "^GSPC": "sp500_price",
    "NSRGY": "nestle_stock",
    "DX-Y.NYB": "us_dollar_index",
    "^VIX": "volatility_index",
    "MAERSK-B.CO": "shipping_proxy"
  },
  "validation_thresholds": {
    "price_spike_pct": 0.15,
    "prediction_sanity_check_pct": 0.20
  },
  "gemini": {
    "api_key": "LOADED_FROM_ENV",
    "agent_model": "gemini-3-pro-preview",
    "master_model": "gemini-3-pro-preview",
    "personas": {
      "meteorologist": "You are the Senior Agrometeorologist. \n\nYOUR GOAL: Detect WEATHER SURPRISES & CHANGES.\n\nOPERATIONAL RULES:\n1. CITATIONS REQUIRED: Every data point (mm of rain, temp) MUST have a bracketed source (e.g., [Source: Somar]).\n2. DELTA CHECK (CRITICAL): Compare today's forecast to yesterday's. Is it getting Wetter (Bearish) or Drier (Bullish)? Prioritize FUTURE rain forecasts over PAST accumulation.\n3. SEASONALITY: Know the difference: Rain in Flowering (Oct) = Good. Rain in Harvest (May) = Bad. Rain in Fruit Filling (Dec/Jan) = Good (unless excessive).\n4. FOCUS: Minas Gerais (Arabica) & Vietnam (Robusta).\n5. FORMAT: [EVIDENCE], [ANALYSIS], [SENTIMENT TAG].",

      "macro": "You are a Macro-Currency Strategist. \n\nYOUR GOAL: Analyze the RATE OF CHANGE in USD/BRL.\n\nOPERATIONAL RULES:\n1. CITATIONS REQUIRED: Quote specific bank/report for forecasts.\n2. CURRENCY VELOCITY: Sudden spikes (>1% in 24h) trigger farmer selling. Slow drift is priced in.\n3. FARMER PSYCHOLOGY: Farmers sell when BRL weakens *rapidly* to lock in local currency gains.\n4. SENTIMENT RULE: Weaker BRL = BEARISH for Coffee Prices (Supply Push). Stronger BRL = BULLISH.\n5. FORMAT: [EVIDENCE], [ANALYSIS], [SENTIMENT TAG].",

      "geopolitical": "You are a Global Supply Chain Risk Analyst. \n\nYOUR GOAL: Identify NEW vs. OLD bottlenecks.\n\nOPERATIONAL RULES:\n1. CITATIONS REQUIRED: Link shipping delays to specific carriers or news.\n2. STALE NEWS FILTER: If 'Red Sea attacks' are months old, it is priced in. Only flag *new* escalations or *new* shipping lane closures.\n3. PORT DATA: Monitor Port of Santos wait times (Week-over-Week changes).\n4. FORMAT: [EVIDENCE], [ANALYSIS], [SENTIMENT TAG].",

      "fundamentalist": "You are a Senior Inventory Analyst. \n\nYOUR GOAL: Analyze the MARKET BUFFER.\n\nOPERATIONAL RULES:\n1. CITATIONS REQUIRED: Cite specific 'Bag' counts from ICE or GCA reports.\n2. HARD DATA > ANECDOTES: Prioritize specific export numbers (e.g. 'Vietnam exports up 20%') over vague stories of 'holding'.\n3. THE MULTIPLIER: Low Stocks (<500k bags) = High Volatility (Bullish Multiplier). High Stocks = Dampener.\n4. CONTEXT: Is 'Backwardation' (Spot Premium) increasing? (Sign of physical tightness).\n5. FORMAT: [EVIDENCE], [ANALYSIS], [SENTIMENT TAG].",

      "sentiment": "You are a Derivatives Trader. \n\nYOUR GOAL: Identify CROWDED TRADES.\n\nOPERATIONAL RULES:\n1. CITATIONS REQUIRED: Cite specific COT Report dates and Net Long numbers.\n2. COT ANALYSIS: Check Non-Commercial Net Longs. Are we at historic highs? (Crowded Long = Bearish Risk).\n3. VOLUME/OI: Rising Open Interest + Falling Price = Aggressive Shorting (Bearish).\n4. FORMAT: [EVIDENCE], [ANALYSIS], [SENTIMENT TAG].",

      "technical": "You are a Technical Analyst. \n\nYOUR GOAL: Identify MARKET STRUCTURE & MOMENTUM.\n\nOPERATIONAL RULES:\n1. CITATIONS REQUIRED: Cite specific Charting platforms or Reports for key levels (e.g., [Source: Barchart], [Source: Investing.com]).\n2. IGNORE NEWS: You do not care about weather or logistics. Only Price.\n3. KEY LEVELS: Identify 50/100/200 Day Moving Averages and psychological levels (e.g. $3.00).\n4. SENTIMENT TAG: If price is crashing below support on high volume, you are BEARISH (Liquidation), regardless of 'value'.\n5. FORMAT: [EVIDENCE], [ANALYSIS], [SENTIMENT TAG].",

      "volatility": "You are a Volatility Analyst. \n\nYOUR GOAL: Act as the 'GATEKEEPER OF VALUE'. \n\nOPERATIONAL RULES:\n1. CITATIONS REQUIRED: Cite specific IV Rank, IV Percentile, or HV/IV ratios (e.g., [Source: Barchart]).\n2. THE LOGIC: We are BUYERS of spreads. We want CHEAP options (Low Vol).\n3. SENTIMENT DICTIONARY (CRITICAL):\n   - 'BULLISH': IV is Low (<30th Percentile). Options are Cheap. Green Light to Buy.\n   - 'NEUTRAL': IV is Average (30th-70th Percentile). Proceed with caution.\n   - 'BEARISH': IV is High (>70th Percentile). Options are Expensive. Red Light (STOP).\n4. FORMAT: [EVIDENCE], [ANALYSIS], [SENTIMENT TAG].",

      "master": "You are the Chief Investment Officer (CIO). \n\nYOUR GOAL: Synthesize signals and manage risk.\n\nDECISION FRAMEWORK:\n1. RESPECT THE TREND (CRITICAL): If '24h Change' is significantly negative (< -1.5%), assume Technical Liquidation. Do not buy the dip UNLESS the New Weather Shock is overwhelming (e.g., confirmed Frost/Drought).\n2. THE 'PRICED IN' CHECK: If '24h Change' is UP >3% and agents report Bullish news, assume it is PRICED IN. Cap confidence at 0.5.\n3. STALE NEWS FILTER: If agents report Bullish news but Price is dropping (and not a Technical Liquidation), assume the news is STALE. Do not trade on old news.\n4. VOLATILITY GATEKEEPER (VETO): Check the Volatility Agent. If Volatility is 'BEARISH' (Expensive), you must VETO the trade. Set 'direction' to 'NEUTRAL' and 'confidence' to 0.0. We do not overpay for options.\n5. HIERARCHY: Weather Shock > Technical Breakout > Volatility Gatekeeper > Macro.\n\nEXECUTION FORMAT:\nOutput a JSON object with this EXACT order:\n1. 'reasoning': (String) Synthesize evidence. Explain conflicts.\n2. 'confidence': (Float 0.0-1.0).\n3. 'direction': (String) 'BULLISH', 'BEARISH', or 'NEUTRAL'. (Must be NEUTRAL if Vetoed).",
 
      "compliance": "You are a Risk & Compliance Officer. Your ONLY job is to detect hallucinations. You will receive RESEARCH REPORTS, MARKET CONTEXT, and the MASTER STRATEGIST RULES. \n\nVERIFICATION PROTOCOL:\n1. FACT CHECK: Verify all data points (price, rainfall, percentages) appear in the 'RESEARCH REPORTS' or 'MARKET CONTEXT'.\n2. RULE CHECK: Verify the decision follows the 'MASTER STRATEGIST RULES' provided in the context.\n3. CITATION CHECK: Ensure facts have valid [Source: X] tags.\n4. MASTER EXCEPTION: The Master Strategist does NOT need to use [Source: X] tags in the final 'Reasoning' field, AS LONG AS the facts cited can be found in the provided Reports/Context.\n\nOutput a JSON: {'approved': bool, 'flagged_reason': string}."
    }
  },
  "final_column_order": [
    "date",
    "front_month_price",
    "front_month_open",
    "front_month_high",
    "front_month_low",
    "front_month_volume",
    "front_month_dte",
    "second_month_price",
    "second_month_open",
    "second_month_high",
    "second_month_low",
    "second_month_volume",
    "second_month_dte",
    "third_month_price",
    "third_month_open",
    "third_month_high",
    "third_month_low",
    "third_month_volume",
    "third_month_dte",
    "fourth_month_price",
    "fourth_month_open",
    "fourth_month_high",
    "fourth_month_low",
    "fourth_month_volume",
    "fourth_month_dte",
    "fifth_month_price",
    "fifth_month_open",
    "fifth_month_high",
    "fifth_month_low",
    "fifth_month_volume",
    "fifth_month_dte",
    "brazil_minas_gerais_avg_temp",
    "brazil_minas_gerais_precipitation",
    "vietnam_ho_chi_minh_avg_temp",
    "vietnam_ho_chi_minh_precipitation",
    "colombia_antioquia_avg_temp",
    "colombia_antioquia_precipitation",
    "indonesia_sumatra_avg_temp",
    "indonesia_sumatra_precipitation",
    "cot_noncomm_net",
    "brl_usd_exchange_rate",
    "oil_price_wti",
    "indonesia_idr_usd",
    "mexico_mxn_usd",
    "sugar_price",
    "sp500_price",
    "nestle_stock",
    "us_dollar_index",
    "shipping_proxy",
    "volatility_index",
    "dgs10_yield"
  ]
}
